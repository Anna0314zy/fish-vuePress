<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>聊聊面试必考-递归思想与实战 | 小鱼儿的博客</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="专注前端技术栈分享,从前端到Node.js再到数据库">
    
    <link rel="preload" href="/fish-vuePress/assets/css/0.styles.af3f7b63.css" as="style"><link rel="preload" href="/fish-vuePress/assets/js/app.df5f89c4.js" as="script"><link rel="preload" href="/fish-vuePress/assets/js/5.edcfac08.js" as="script"><link rel="preload" href="/fish-vuePress/assets/js/121.8c4731cc.js" as="script"><link rel="prefetch" href="/fish-vuePress/assets/js/10.b77df3ea.js"><link rel="prefetch" href="/fish-vuePress/assets/js/100.a0d590cb.js"><link rel="prefetch" href="/fish-vuePress/assets/js/101.0c4817e4.js"><link rel="prefetch" href="/fish-vuePress/assets/js/102.78764042.js"><link rel="prefetch" href="/fish-vuePress/assets/js/103.a96d5da9.js"><link rel="prefetch" href="/fish-vuePress/assets/js/104.a28a3fb7.js"><link rel="prefetch" href="/fish-vuePress/assets/js/105.2cec88b8.js"><link rel="prefetch" href="/fish-vuePress/assets/js/106.e18e3f35.js"><link rel="prefetch" href="/fish-vuePress/assets/js/107.3744efd2.js"><link rel="prefetch" href="/fish-vuePress/assets/js/108.ced67a25.js"><link rel="prefetch" href="/fish-vuePress/assets/js/109.f57e1134.js"><link rel="prefetch" href="/fish-vuePress/assets/js/11.97b74358.js"><link rel="prefetch" href="/fish-vuePress/assets/js/110.7c61f586.js"><link rel="prefetch" href="/fish-vuePress/assets/js/111.8e889bff.js"><link rel="prefetch" href="/fish-vuePress/assets/js/112.39a52113.js"><link rel="prefetch" href="/fish-vuePress/assets/js/113.dae7f961.js"><link rel="prefetch" href="/fish-vuePress/assets/js/114.2d597a8d.js"><link rel="prefetch" href="/fish-vuePress/assets/js/115.9553737f.js"><link rel="prefetch" href="/fish-vuePress/assets/js/116.063d8847.js"><link rel="prefetch" href="/fish-vuePress/assets/js/117.13e26da9.js"><link rel="prefetch" href="/fish-vuePress/assets/js/118.3529b5be.js"><link rel="prefetch" href="/fish-vuePress/assets/js/119.8792b07b.js"><link rel="prefetch" href="/fish-vuePress/assets/js/12.3ecb1de5.js"><link rel="prefetch" href="/fish-vuePress/assets/js/120.ed65532d.js"><link rel="prefetch" href="/fish-vuePress/assets/js/122.4d92baeb.js"><link rel="prefetch" href="/fish-vuePress/assets/js/123.210e85e7.js"><link rel="prefetch" href="/fish-vuePress/assets/js/124.1e513801.js"><link rel="prefetch" href="/fish-vuePress/assets/js/125.d9e5ebae.js"><link rel="prefetch" href="/fish-vuePress/assets/js/126.107bfe67.js"><link rel="prefetch" href="/fish-vuePress/assets/js/127.14edacab.js"><link rel="prefetch" href="/fish-vuePress/assets/js/128.888bc9d6.js"><link rel="prefetch" href="/fish-vuePress/assets/js/129.92bb5f4a.js"><link rel="prefetch" href="/fish-vuePress/assets/js/13.824408f4.js"><link rel="prefetch" href="/fish-vuePress/assets/js/130.e9dca7f9.js"><link rel="prefetch" href="/fish-vuePress/assets/js/131.6bc5662c.js"><link rel="prefetch" href="/fish-vuePress/assets/js/132.1bfdc2ca.js"><link rel="prefetch" href="/fish-vuePress/assets/js/133.99f9ca2f.js"><link rel="prefetch" href="/fish-vuePress/assets/js/134.69c60897.js"><link rel="prefetch" href="/fish-vuePress/assets/js/135.85a830bc.js"><link rel="prefetch" href="/fish-vuePress/assets/js/136.b5627c7c.js"><link rel="prefetch" href="/fish-vuePress/assets/js/137.bcadb89c.js"><link rel="prefetch" href="/fish-vuePress/assets/js/14.ebcb0a05.js"><link rel="prefetch" href="/fish-vuePress/assets/js/15.d3a0b0df.js"><link rel="prefetch" href="/fish-vuePress/assets/js/16.92300b13.js"><link rel="prefetch" href="/fish-vuePress/assets/js/17.e7cd0ca8.js"><link rel="prefetch" href="/fish-vuePress/assets/js/18.9b1b98e6.js"><link rel="prefetch" href="/fish-vuePress/assets/js/19.a6853cc0.js"><link rel="prefetch" href="/fish-vuePress/assets/js/2.3e0c97ad.js"><link rel="prefetch" href="/fish-vuePress/assets/js/20.eb68a5fa.js"><link rel="prefetch" href="/fish-vuePress/assets/js/21.b3e94a5d.js"><link rel="prefetch" href="/fish-vuePress/assets/js/22.7e6803a4.js"><link rel="prefetch" href="/fish-vuePress/assets/js/23.7a26abb3.js"><link rel="prefetch" href="/fish-vuePress/assets/js/24.3a0e2284.js"><link rel="prefetch" href="/fish-vuePress/assets/js/25.2f09a139.js"><link rel="prefetch" href="/fish-vuePress/assets/js/26.fdd61db3.js"><link rel="prefetch" href="/fish-vuePress/assets/js/27.88ee342e.js"><link rel="prefetch" href="/fish-vuePress/assets/js/28.2dba197d.js"><link rel="prefetch" href="/fish-vuePress/assets/js/29.0b89f09e.js"><link rel="prefetch" href="/fish-vuePress/assets/js/3.961388cf.js"><link rel="prefetch" href="/fish-vuePress/assets/js/30.0b4504ec.js"><link rel="prefetch" href="/fish-vuePress/assets/js/31.35a942d3.js"><link rel="prefetch" href="/fish-vuePress/assets/js/32.f6f62b31.js"><link rel="prefetch" href="/fish-vuePress/assets/js/33.1fce904f.js"><link rel="prefetch" href="/fish-vuePress/assets/js/34.86a7f705.js"><link rel="prefetch" href="/fish-vuePress/assets/js/35.a0d3c71e.js"><link rel="prefetch" href="/fish-vuePress/assets/js/36.d4aa17d5.js"><link rel="prefetch" href="/fish-vuePress/assets/js/37.e84a19da.js"><link rel="prefetch" href="/fish-vuePress/assets/js/38.5a3d6630.js"><link rel="prefetch" href="/fish-vuePress/assets/js/39.72e8a86b.js"><link rel="prefetch" href="/fish-vuePress/assets/js/4.deb713bc.js"><link rel="prefetch" href="/fish-vuePress/assets/js/40.171e086b.js"><link rel="prefetch" href="/fish-vuePress/assets/js/41.3d3d2a08.js"><link rel="prefetch" href="/fish-vuePress/assets/js/42.1b56fbe9.js"><link rel="prefetch" href="/fish-vuePress/assets/js/43.55d66008.js"><link rel="prefetch" href="/fish-vuePress/assets/js/44.1f65c599.js"><link rel="prefetch" href="/fish-vuePress/assets/js/45.bd0206b1.js"><link rel="prefetch" href="/fish-vuePress/assets/js/46.aafec962.js"><link rel="prefetch" href="/fish-vuePress/assets/js/47.ac94a28e.js"><link rel="prefetch" href="/fish-vuePress/assets/js/48.2a025aa5.js"><link rel="prefetch" href="/fish-vuePress/assets/js/49.469aaa8c.js"><link rel="prefetch" href="/fish-vuePress/assets/js/50.08274f17.js"><link rel="prefetch" href="/fish-vuePress/assets/js/51.9b109d30.js"><link rel="prefetch" href="/fish-vuePress/assets/js/52.85094941.js"><link rel="prefetch" href="/fish-vuePress/assets/js/53.610ff2c3.js"><link rel="prefetch" href="/fish-vuePress/assets/js/54.1441c891.js"><link rel="prefetch" href="/fish-vuePress/assets/js/55.b8bbb84d.js"><link rel="prefetch" href="/fish-vuePress/assets/js/56.440ddff2.js"><link rel="prefetch" href="/fish-vuePress/assets/js/57.844af420.js"><link rel="prefetch" href="/fish-vuePress/assets/js/58.3394b61f.js"><link rel="prefetch" href="/fish-vuePress/assets/js/59.5e352a87.js"><link rel="prefetch" href="/fish-vuePress/assets/js/6.81d396d4.js"><link rel="prefetch" href="/fish-vuePress/assets/js/60.5ae989c0.js"><link rel="prefetch" href="/fish-vuePress/assets/js/61.0864cf11.js"><link rel="prefetch" href="/fish-vuePress/assets/js/62.c7442a3b.js"><link rel="prefetch" href="/fish-vuePress/assets/js/63.d893bc29.js"><link rel="prefetch" href="/fish-vuePress/assets/js/64.6da0341b.js"><link rel="prefetch" href="/fish-vuePress/assets/js/65.e2789671.js"><link rel="prefetch" href="/fish-vuePress/assets/js/66.5b4f4293.js"><link rel="prefetch" href="/fish-vuePress/assets/js/67.a0798723.js"><link rel="prefetch" href="/fish-vuePress/assets/js/68.53f11a09.js"><link rel="prefetch" href="/fish-vuePress/assets/js/69.63cb2a8a.js"><link rel="prefetch" href="/fish-vuePress/assets/js/7.6897ca43.js"><link rel="prefetch" href="/fish-vuePress/assets/js/70.804547f9.js"><link rel="prefetch" href="/fish-vuePress/assets/js/71.5787158b.js"><link rel="prefetch" href="/fish-vuePress/assets/js/72.946799be.js"><link rel="prefetch" href="/fish-vuePress/assets/js/73.9d9e52b5.js"><link rel="prefetch" href="/fish-vuePress/assets/js/74.28bafc8a.js"><link rel="prefetch" href="/fish-vuePress/assets/js/75.bd946076.js"><link rel="prefetch" href="/fish-vuePress/assets/js/76.a566a607.js"><link rel="prefetch" href="/fish-vuePress/assets/js/77.3e7bfce0.js"><link rel="prefetch" href="/fish-vuePress/assets/js/78.ec1d52b5.js"><link rel="prefetch" href="/fish-vuePress/assets/js/79.492d0e3b.js"><link rel="prefetch" href="/fish-vuePress/assets/js/8.49a8a0b3.js"><link rel="prefetch" href="/fish-vuePress/assets/js/80.f68ea700.js"><link rel="prefetch" href="/fish-vuePress/assets/js/81.a15fa2be.js"><link rel="prefetch" href="/fish-vuePress/assets/js/82.786ff7c0.js"><link rel="prefetch" href="/fish-vuePress/assets/js/83.6b9d4900.js"><link rel="prefetch" href="/fish-vuePress/assets/js/84.48c296d1.js"><link rel="prefetch" href="/fish-vuePress/assets/js/85.567505d3.js"><link rel="prefetch" href="/fish-vuePress/assets/js/86.1b6fdd4e.js"><link rel="prefetch" href="/fish-vuePress/assets/js/87.90cefee1.js"><link rel="prefetch" href="/fish-vuePress/assets/js/88.f7c32624.js"><link rel="prefetch" href="/fish-vuePress/assets/js/89.0f22b52a.js"><link rel="prefetch" href="/fish-vuePress/assets/js/9.7a3a195f.js"><link rel="prefetch" href="/fish-vuePress/assets/js/90.b23071bb.js"><link rel="prefetch" href="/fish-vuePress/assets/js/91.9b06412d.js"><link rel="prefetch" href="/fish-vuePress/assets/js/92.44c6f292.js"><link rel="prefetch" href="/fish-vuePress/assets/js/93.ced630dd.js"><link rel="prefetch" href="/fish-vuePress/assets/js/94.c5d880af.js"><link rel="prefetch" href="/fish-vuePress/assets/js/95.7ea00f99.js"><link rel="prefetch" href="/fish-vuePress/assets/js/96.08a9387a.js"><link rel="prefetch" href="/fish-vuePress/assets/js/97.7cf3b129.js"><link rel="prefetch" href="/fish-vuePress/assets/js/98.92843a37.js"><link rel="prefetch" href="/fish-vuePress/assets/js/99.3fad2047.js">
    <link rel="stylesheet" href="/fish-vuePress/assets/css/0.styles.af3f7b63.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/fish-vuePress/" class="home-link router-link-active"><!----> <span class="site-name">小鱼儿的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/fish-vuePress/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/fish-vuePress/node-quick/" class="nav-link">
  node
</a></div><div class="nav-item"><a href="/fish-vuePress/webframe/" class="nav-link router-link-active">
  前端基础
</a></div><div class="nav-item"><a href="/fish-vuePress/vue-quick/" class="nav-link">
  快速掌握vue
</a></div><div class="nav-item"><a href="/fish-vuePress/database/" class="nav-link">
  数据库
</a></div><div class="nav-item"><a href="/fish-vuePress/react/" class="nav-link">
  react
</a></div><div class="nav-item"><a href="/fish-vuePress/webpack/" class="nav-link">
  webpack
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/fish-vuePress/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/fish-vuePress/node-quick/" class="nav-link">
  node
</a></div><div class="nav-item"><a href="/fish-vuePress/webframe/" class="nav-link router-link-active">
  前端基础
</a></div><div class="nav-item"><a href="/fish-vuePress/vue-quick/" class="nav-link">
  快速掌握vue
</a></div><div class="nav-item"><a href="/fish-vuePress/database/" class="nav-link">
  数据库
</a></div><div class="nav-item"><a href="/fish-vuePress/react/" class="nav-link">
  react
</a></div><div class="nav-item"><a href="/fish-vuePress/webpack/" class="nav-link">
  webpack
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/fish-vuePress/webframe/" aria-current="page" class="sidebar-link">前端</a></li><li><a href="/fish-vuePress/webframe/javascript/promise.html" class="sidebar-link">深度了解promise</a></li><li><a href="/fish-vuePress/webframe/js/regexp.html" class="sidebar-link">正则</a></li><li><a href="/fish-vuePress/webframe/js/JS2.html" class="sidebar-link">js数据类型</a></li><li><a href="/fish-vuePress/webframe/js/math.html" class="sidebar-link">前端算法</a></li><li><a href="/fish-vuePress/webframe/js/modules.html" class="sidebar-link">其他</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>css</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>javascript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fish-vuePress/webframe/javascript/" aria-current="page" class="sidebar-link">目录</a></li><li><a href="/fish-vuePress/webframe/javascript/js10.html" class="sidebar-link">面试题-JS篇</a></li><li><a href="/fish-vuePress/webframe/javascript/datatype.html" class="sidebar-link">数据类型]面试常问javascript数据类型</a></li><li><a href="/fish-vuePress/webframe/javascript/scoped.html" class="sidebar-link">[作用域]作用域于作用域链</a></li><li><a href="/fish-vuePress/webframe/javascript/closure.html" class="sidebar-link">javascript中的闭包这一篇就够了</a></li><li><a href="/fish-vuePress/webframe/javascript/copy.html" class="sidebar-link">[赋值拷贝]js中赋值•浅拷贝•深拷贝</a></li><li><a href="/fish-vuePress/webframe/javascript/prototype.html" class="sidebar-link">javascript中原型链</a></li><li><a href="/fish-vuePress/webframe/javascript/this.html" class="sidebar-link">this的各种讲解</a></li><li><a href="/fish-vuePress/webframe/javascript/exports.html" class="sidebar-link">exports和module.exports的区别</a></li><li><a href="/fish-vuePress/webframe/javascript/recircleFun.html" aria-current="page" class="active sidebar-link">聊聊面试必考-递归思想与实战</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fish-vuePress/webframe/javascript/recircleFun.html#本篇文章你将学到" class="sidebar-link">本篇文章你将学到</a></li><li class="sidebar-sub-header"><a href="/fish-vuePress/webframe/javascript/recircleFun.html#为什么要写这篇文章" class="sidebar-link">为什么要写这篇文章</a></li><li class="sidebar-sub-header"><a href="/fish-vuePress/webframe/javascript/recircleFun.html#递归算法是什么" class="sidebar-link">递归算法是什么</a></li><li class="sidebar-sub-header"><a href="/fish-vuePress/webframe/javascript/recircleFun.html#递归算法思想讲解用和注意事项" class="sidebar-link">递归算法思想讲解用和注意事项</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fish-vuePress/webframe/javascript/recircleFun.html#什么时候使用递归" class="sidebar-link">什么时候使用递归?</a></li><li class="sidebar-sub-header"><a href="/fish-vuePress/webframe/javascript/recircleFun.html#满足递归的条件" class="sidebar-link" style="padding-left:3rem;">满足递归的条件</a></li><li class="sidebar-sub-header"><a href="/fish-vuePress/webframe/javascript/recircleFun.html#如何写递归代码-满足上面条件-确认使用递归后" class="sidebar-link">如何写递归代码？(满足上面条件，确认使用递归后)</a></li><li class="sidebar-sub-header"><a href="/fish-vuePress/webframe/javascript/recircleFun.html#分析排队取票的例子-单分支层层递归" class="sidebar-link" style="padding-left:3rem;">分析排队取票的例子(单分支层层递归)</a></li><li class="sidebar-sub-header"><a href="/fish-vuePress/webframe/javascript/recircleFun.html#再看一个走台阶例子-多分支并列递归" class="sidebar-link" style="padding-left:3rem;">再看一个走台阶例子(多分支并列递归)</a></li><li class="sidebar-sub-header"><a href="/fish-vuePress/webframe/javascript/recircleFun.html#写递归代码时注意事项" class="sidebar-link">写递归代码时注意事项</a></li><li class="sidebar-sub-header"><a href="/fish-vuePress/webframe/javascript/recircleFun.html#_1-爆栈" class="sidebar-link" style="padding-left:3rem;">1. 爆栈</a></li><li class="sidebar-sub-header"><a href="/fish-vuePress/webframe/javascript/recircleFun.html#_2-重复计算" class="sidebar-link" style="padding-left:3rem;">2.重复计算</a></li><li class="sidebar-sub-header"><a href="/fish-vuePress/webframe/javascript/recircleFun.html#_3-循环引用" class="sidebar-link" style="padding-left:3rem;">3.循环引用</a></li><li class="sidebar-sub-header"><a href="/fish-vuePress/webframe/javascript/recircleFun.html#递归算法的一点感悟" class="sidebar-link">递归算法的一点感悟</a></li></ul></li><li class="sidebar-sub-header"><a href="/fish-vuePress/webframe/javascript/recircleFun.html#递归算法使用场景-开篇提到的几个面试题" class="sidebar-link">递归算法使用场景(开篇提到的几个面试题)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fish-vuePress/webframe/javascript/recircleFun.html#_1-经典走台阶问题" class="sidebar-link">1.经典走台阶问题</a></li><li class="sidebar-sub-header"><a href="/fish-vuePress/webframe/javascript/recircleFun.html#_2-四级分销-找到最佳推荐人" class="sidebar-link">2.四级分销-找到最佳推荐人</a></li><li class="sidebar-sub-header"><a href="/fish-vuePress/webframe/javascript/recircleFun.html#_3-数组拍平" class="sidebar-link">3.数组拍平</a></li><li class="sidebar-sub-header"><a href="/fish-vuePress/webframe/javascript/recircleFun.html#_4-对象格式化" class="sidebar-link">4.对象格式化</a></li><li class="sidebar-sub-header"><a href="/fish-vuePress/webframe/javascript/recircleFun.html#_5-实现一个深拷贝" class="sidebar-link">5.实现一个深拷贝</a></li><li class="sidebar-sub-header"><a href="/fish-vuePress/webframe/javascript/recircleFun.html#weakmap-补充知识" class="sidebar-link" style="padding-left:3rem;">weakMap 补充知识</a></li></ul></li><li class="sidebar-sub-header"><a href="/fish-vuePress/webframe/javascript/recircleFun.html#总结" class="sidebar-link">总结</a></li><li class="sidebar-sub-header"><a href="/fish-vuePress/webframe/javascript/recircleFun.html#参考文章" class="sidebar-link">参考文章</a></li></ul></li><li><a href="/fish-vuePress/webframe/javascript/unique.html" class="sidebar-link">js中数组去重(面试如何回答)</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>es6</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>tool</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>其他面试题</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="本篇文章你将学到"><a href="#本篇文章你将学到" class="header-anchor">#</a> 本篇文章你将学到</h2> <p><img src="http://img.xiaogangzai.cn/article_12.jpg" alt=""></p> <h2 id="为什么要写这篇文章"><a href="#为什么要写这篇文章" class="header-anchor">#</a> 为什么要写这篇文章</h2> <ol><li>“递归”算法对于一个程序员应该算是最经典的算法之一，而且它越想越乱，很多复杂算法的实现也都用到了递归，例如深度优先搜索，二叉树遍历等。</li> <li>面试中常常会问递归相关的内容(深拷贝，对象格式化，数组拍平，走台阶问题等)</li> <li>最近项目中有一个需求，裂变分享，但是不仅仅给分享人返利，还会给最终分享人返利，但是只做到4级分销（也用到了递归，文中会讲解）</li></ol> <h2 id="递归算法是什么"><a href="#递归算法是什么" class="header-anchor">#</a> 递归算法是什么</h2> <blockquote><p><code>维基百科</code>: <code>递归</code>是在一个函数定义的内部用到自身。有此种定义的函数叫做递归。听起来好像会导致无限重复，但只要定义适当，就不会这样。 一般来说，一个递归函数的定义有两个部分。首先，至少要有一个底线，就是一个简单的线，越过此处，<code>递归</code>。</p></blockquote> <p>我自己简单地理解递归就是：<code>自己调用自己，有递有归，注意界限值</code>。</p> <p>一张有趣的图片：</p> <p><img src="http://img.xiaogangzai.cn/article_13.jpg" alt=""></p> <h2 id="递归算法思想讲解用和注意事项"><a href="#递归算法思想讲解用和注意事项" class="header-anchor">#</a> 递归算法思想讲解用和注意事项</h2> <h3 id="什么时候使用递归"><a href="#什么时候使用递归" class="header-anchor">#</a> 什么时候使用递归?</h3> <p>看一个十一假期发生的小例子，带你走进递归。十一放假时去火车站排队取票，取票排了好多人，这个时候总有一些说时间来不及要插队取票的小伙伴，我已经排的很遥远了，发现自己离取票口越来越远了呢，我超级想知道我现在排在了第几位(前提:前面不再有人插队取票了)，用递归思想我们应该怎么做？</p> <h4 id="满足递归的条件"><a href="#满足递归的条件" class="header-anchor">#</a> 满足递归的条件</h4> <p>一个问题只要同时满足以下<strong>3</strong> 个条件，就可以用递归来解决。</p> <ol><li>一个问题的解可以分解为几个子问题的解。</li></ol> <p>何为子问题 ？就是数据规模更小的问题。
比如，前面说的你想知道你排在第几位的例子，你要知道，自己在哪一排的问题，可以分解为每个人在哪一排这样一个子问题。</p> <ol start="2"><li>这个问题分解之后的子问题，除了数据规模不同，求解思路完全一样</li></ol> <p>比如前面说的你想知道你排在第几的例子，你求解自己在哪一排的思路，和前面一排人求解自己在哪一排的思路，是<strong>一模一样</strong>的。</p> <ol start="3"><li>存在递归终止条件</li></ol> <p>比如前面说的你想知道你排在第几的例子，第一排的人不需要再继续询问任何人，就知道自己在哪一排，也就是 <code>f(1) = 1</code>，这就是递归的终止条件，找到终止条件就会开始进行“归”的过程。</p> <h3 id="如何写递归代码-满足上面条件-确认使用递归后"><a href="#如何写递归代码-满足上面条件-确认使用递归后" class="header-anchor">#</a> 如何写递归代码？(满足上面条件，确认使用递归后)</h3> <p>记住最关键的两点:</p> <ol><li><p><strong>写出递归公式(注意几分支递归)</strong></p></li> <li><p><strong>找到终止条件</strong></p></li></ol> <h4 id="分析排队取票的例子-单分支层层递归"><a href="#分析排队取票的例子-单分支层层递归" class="header-anchor">#</a> 分析排队取票的例子(<code>单分支层层递归</code>)</h4> <p>排队取票例子的子问题已经分析出来，我想知道我的位置在哪一排，就去问前面的人，前面的人位置加一就是这个人当前队伍的位置，你前面的人想知道继续向前问(一层问一层，思路完全相同，最后到第一个人终止)。递推公式是不是想出来了。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">f</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>
<span class="token comment">//f(n) 为我所在的当前层</span>
<span class="token comment">//f(n-1) 为我前面的人所在的当前层</span>
<span class="token comment">// +1 为我前面层与我所在层</span>
</code></pre></div><h4 id="再看一个走台阶例子-多分支并列递归"><a href="#再看一个走台阶例子-多分支并列递归" class="header-anchor">#</a> 再看一个走台阶例子(<code>多分支并列递归</code>)</h4> <p>具体学习如何分析和写出递归代码，以最经典的走台阶例子进行讲解。</p> <p><strong>题</strong>：假设有n个台阶，每次你可以跨一个台阶或者两个台阶，请问走这n个台阶有多少种走法？用编程求解。</p> <p>按照上面说的关键点，先找<strong>递归公式</strong>：根据第一步的走法可分为两类，第一类是第一步走了一个台阶，第二类是第一步走了两个台阶。所以n个台阶的走法=（先走1台阶后，n-1个台阶的走法）+（先走2台阶后，n-2个台阶的走法）。写出的递归公式就是:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">f</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">f</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre></div><p>有了递推公式第，第二步有了递推公式，递归代码基本上就完成了一半。我们再来看下终止条件。当有一个台阶时，我们不需要再继续递归，就只有一种走法。所以 <code>f(1)=1</code>。这个递归终止条件足够吗？我们可以用 <code>n=2，n=3</code> 这样比较小的数试验一下。</p> <p><code>n=2</code> 时，<code>f(2)=f(1)+f(0)</code>。如果递归终止条件只有一个 <code>f(1)=1</code>，那 <code>f(2)</code> 就无法求解了。所以除了 <code>f(1)=1</code> 这一个递归终止条件外，还要有 <code>f(0)=1</code>，表示走 0 个台阶有一种走法，不过这样子看起来就不符合正常的逻辑思维了。所以，我们可以把 <code>f(2)=2</code> 作为一种终止条件，表示走 2 个台阶，有两种走法，一步走完或者分两步来走。</p> <p>所以，递归终止条件就是 <code>f(1)=1，f(2)=2</code>。这个时候，你可以再拿 <code>n=3，n=4</code> 来验证一下，这个终止条件是否足够并且正确。</p> <p>我们把递归终止条件和刚刚推出的递归公式合在一起就是：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">f</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token function">f</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">f</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>最后根据最终的递归公式转换为代码就是</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">walk</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="写递归代码时注意事项"><a href="#写递归代码时注意事项" class="header-anchor">#</a> <strong>写递归代码时注意事项</strong></h3> <p>上面提到了两个例子(十一去车站排队取票，走台阶问题)，根据这两个例子(选择这两个例子的原因，十一去车站排队取票问题单分支递归，走台阶问题多分支并列递归，两个例子<code>刚刚好</code>)，接下来我们具体讲一下递归的注意事项。</p> <h4 id="_1-爆栈"><a href="#_1-爆栈" class="header-anchor">#</a> 1. 爆栈</h4> <p>十一去车站排队取票，假设这是个无敌长队，可能以及排了1000人(嘿嘿，请注意是个假设)，这个时候如果栈的大小为1KB。
递归未考虑爆栈时代码如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>函数调用会使用栈来保存临时变量。栈的数据结构是<code>先进后出</code>，每调用一个函数，都会将临时变量封装为<code>栈帧</code>压入<code>内存栈</code>，等函数执行完成返回时才出栈。系统栈或者虚拟机栈空间一般都不大。如果递归求解的数据规模很大，调用层次很深，一直压入栈，就会有堆栈溢出的风险。</p> <p>这么写代码，对于这种假设的<code>无敌长队</code>肯定会出现爆栈的情况，修改代码</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 全局变量，表示递归的深度。</span>
<span class="token keyword">let</span> depth <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token operator">++</span>depth；
  <span class="token keyword">if</span> <span class="token punctuation">(</span>depth <span class="token operator">&gt;</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> exception<span class="token punctuation">;</span>
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>修改代码后，加了防止爆栈加了递归次数的限制，这是防止爆栈的比较不错的方式，但是大家请注意，递归次数的限制一般不会限制到1000，一般次数5次，10次还好，1000次，并不能保证其他的的变量不会存入栈中，事先无法计算
，也有可能出现爆栈的问题。</p> <blockquote><p>温馨提示：如果递归深度比较小，可以考虑限制递归次数防止爆栈，如果出现像这种<code>1000</code>的深度，还是考虑下其他方式实现吧。</p></blockquote> <h4 id="_2-重复计算"><a href="#_2-重复计算" class="header-anchor">#</a> 2.重复计算</h4> <p>走台阶的例子，前面我们已经推导出了递归公式和代码实现。在这里再写一遍：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">walk</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">walk</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">walk</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>重复计算说的就是这种，可能这么说大家还不明白，画了一个重复调用函数的图，应该就懂了。</p> <p><img src="http://img.xiaogangzai.cn/article_14.jpg" alt=""></p> <p>看图中的函数调用，你会发现好多函数被调用多次，比如 <code>f(3)</code> ,计算 <code>f(5)</code> 时候需先计算 <code>f(4)</code> 和 <code>f(3)</code>,到了计算 <code>f(4)</code> 的时候还要计算 <code>f(3)</code> 和 <code>f(2)</code> ,这种 <code>f(3)</code> 就被多次重复计算了，解决办法。我们可以使用一个数据结构(注:这个数据结构可以有很多种，比如 js 中可以用<code>set</code>，<code>weakMap</code>，甚至可以用数组。java 中也可以好多种散列表，爱思考的童鞋可以想一下哪一种更优秀哦，后面深拷贝例子我也会具体讲)来存储求解过的 <code>f(k)</code>，再次调用的时候，判断数据结构中是否存在，如果有直接从散列表中取值返回，不需要重复计算，这就避免了重复计算问题。
具体代码如下:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> mapData <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">walk</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token comment">// 值的判断和存储</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>mapData<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> setDatas<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token function">walk</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">walk</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mapData<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> value<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_3-循环引用"><a href="#_3-循环引用" class="header-anchor">#</a> 3.循环引用</h4> <p>循环引用是指递归的内容中出现了重复的内容，
例如给下面内容实现深拷贝:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token punctuation">{</span>
    field1<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    field2<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    field3<span class="token operator">:</span> <span class="token punctuation">{</span>
        child<span class="token operator">:</span> <span class="token string">'child'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    field4<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
target<span class="token punctuation">.</span>target <span class="token operator">=</span> target<span class="token punctuation">;</span>
</code></pre></div><p>具体如何实现深拷贝又要避免循环引用的详细讲解在文中实战部分，请继续往下看，小伙伴。</p> <h3 id="递归算法的一点感悟"><a href="#递归算法的一点感悟" class="header-anchor">#</a> 递归算法的一点感悟</h3> <p>前面提到了使用递归算法时满足的三个条件，确定满足条件后，写递归代码时候的关键点((<strong>写出递归公式,找到终止条件</strong>)，这个关键点文中已经三次提到了哦，请记住它，最后根据递归公式和终止条件翻译成代码。</p> <p>递归代码，不要试图用我们的大脑一层一层分解递归的每个步骤，这样只会越想越烦躁，就算大神也做不到这点哦。</p> <ul><li>递归算法优点：代码的表达力很强，写起来很简洁。</li> <li>递归算法缺点：递归算法有堆栈溢出(爆栈)的风险、存在重复计算，过多的函数调用会耗时较多等问题(写递归算法的时候一定要考虑这几个缺点)、递归时函数的变量的存储需要额外的栈空间，当递归深度很深时，需要额外的内存占空间就会很多，所以递归有非常高的空间复杂度。</li></ul> <h2 id="递归算法使用场景-开篇提到的几个面试题"><a href="#递归算法使用场景-开篇提到的几个面试题" class="header-anchor">#</a> 递归算法使用场景(开篇提到的几个面试题)</h2> <p>写下面几道应用场景实战问题的时候，<code>思想</code>还是之前说的,再重复一遍(<strong>写出递归公式,找到终止条件</strong>)</p> <h3 id="_1-经典走台阶问题"><a href="#_1-经典走台阶问题" class="header-anchor">#</a> 1.经典走台阶问题</h3> <p>走台阶问题在前面已经具体讲了，这里就不再细说，可以看上面内容哦。</p> <h3 id="_2-四级分销-找到最佳推荐人"><a href="#_2-四级分销-找到最佳推荐人" class="header-anchor">#</a> 2.四级分销-找到最佳推荐人</h3> <p>给定一个用户，如何查找用户的最终推荐 <code>id</code>,这里面说了四级分销，终止条件已经找到，只找到 <code>四级分销</code>。
代码实现:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> deep <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">findRootReferrerId</span><span class="token punctuation">(</span><span class="token parameter">actorId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  deep<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> referrerId <span class="token operator">=</span> select referrer_id <span class="token keyword">from</span> <span class="token punctuation">[</span>table<span class="token punctuation">]</span> where actor_id <span class="token operator">=</span> actorId<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>deep <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">return</span> actorId<span class="token punctuation">;</span> <span class="token comment">// 终止条件</span>
  <span class="token keyword">return</span> <span class="token function">findRootReferrerId</span><span class="token punctuation">(</span>referrerId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>尽管可以这样完成了代码，但是还要注意前提:</p> <ol><li>数据库中没有<code>脏数据</code>(脏数据可能是测试直接手动插入数据产生的，比如A推荐了B，B又推荐了A，造成死循环，循环引用)。</li> <li>确认推荐人插入表中数据的时候，一定判断二者之前的推荐关系是否已经存在。</li></ol> <h3 id="_3-数组拍平"><a href="#_3-数组拍平" class="header-anchor">#</a> 3.数组拍平</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1.4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre></div><p>对于数组拍平有时候也会被这样问，这个嵌套数组的层级是多少？
具体实现代码如下:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">flat</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>result<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    a<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token operator">===</span><span class="token string">'[object Array]'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            result<span class="token operator">=</span>result<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token function">flat</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">flat</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 输出结果 [ 1, 2, 3, 1, 2, 1.4, 1, 2, 3 ]</span>
</code></pre></div><h3 id="_4-对象格式化"><a href="#_4-对象格式化" class="header-anchor">#</a> 4.对象格式化</h3> <p>对象格式化这个问题，这种一般是后台返回给前端的数据，有时候需要格式化一下大小写等，一般层级不会太深，不需要考虑<code>终止条件</code>，具体看代码</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 格式化对象 大写变为小写</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    a<span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span>
    b<span class="token operator">:</span> <span class="token punctuation">{</span>
        c<span class="token operator">:</span> <span class="token string">'2'</span><span class="token punctuation">,</span>
        <span class="token constant">D</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token constant">E</span><span class="token operator">:</span> <span class="token string">'3'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">keysLower</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;([A-Z]+)&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">let</span> temp <span class="token operator">=</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    temp <span class="token operator">=</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                        <span class="token keyword">return</span> result<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">=</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
                    <span class="token keyword">delete</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token operator">===</span><span class="token string">'[object Object]'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token function">keysLower</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">keysLower</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出结果 { a: '1', b: { c: '2', d: { e: '3' } } }</span>
</code></pre></div><h3 id="_5-实现一个深拷贝"><a href="#_5-实现一个深拷贝" class="header-anchor">#</a> 5.实现一个深拷贝</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token punctuation">{</span>
    field1<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    field2<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    field3<span class="token operator">:</span> <span class="token punctuation">{</span>
        child<span class="token operator">:</span> <span class="token string">'child'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    field4<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
target<span class="token punctuation">.</span>target <span class="token operator">=</span> target<span class="token punctuation">;</span>
</code></pre></div><p>代码实现如下:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">clone</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> target <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> cloneTarget <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> cloneTarget<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            cloneTarget<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">clone</span><span class="token punctuation">(</span>target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> cloneTarget<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> target<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>深拷贝也是递归常考的例子</p> <p>每次拷贝发生的事:</p> <ul><li>检查 map 中有无克隆过的对象</li> <li>有,直接返回</li> <li>没有, 将当前对象作为 key，克隆对象作为 value 进行存储</li> <li>继续克隆</li></ul> <p>在这段代码中我们使用了 <code>weakMap</code> ，用来防止因循环引用而出现的爆栈。</p> <h4 id="weakmap-补充知识"><a href="#weakmap-补充知识" class="header-anchor">#</a> weakMap 补充知识</h4> <p>都知道js中有好多种数据存储结构，我们为什么要用 weakMap 而不直接用 Map 进行存储呢？</p> <blockquote><p>WeakMap 对象虽然也是一组键/值对的集合，其中的键是弱引用的。其键必须是对象，而值可以是任意的。</p></blockquote> <p>弱引用这个概念在写 java 代码时候用的还是比较多的，但是到了 javascript 能使用的小伙伴并不多，网上很多深拷贝的代码都是直接使用的 Map 存储防止爆栈-- <code>弱引用</code>，看完这篇文章可以试着使用 WeakMap 哦。</p> <blockquote><p>在计算机程序设计中，弱引用与强引用相对，是指不能确保其引用的对象不会被垃圾回收器回收的引用。 一个对象若只被 弱引用 所引用，则被认为是不可访问（或弱可访问）的，并因此可能在任何时刻被回收。</p></blockquote> <p>深拷贝这里有一个循环引用  走台阶问题是重复计算，我认为这是两个问题，走台阶问题是靠终止条件计算出来的。</p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>本篇文章就写到这里，其实还有复杂度问题想写，但是篇幅有限，以后有时间会单独写复杂度的文章。本篇文章重点再重复一篇，不要嫌弃我唠叨，什么条件使用递归（想一下使用递归的优缺点）？递归代码怎么写？递归注意事项？不要妄图用人脑想明白复杂递归。以上几点学明白了足以让你应付大多数的面试问题了，嘿嘿，注意思想哦(还有个 <code>weakMap</code> 小知识大家可以详细去学下，也是可以扩展为一篇文章的)。小伙伴们有时间可以去找几个递归问题练习一下。下篇文章见！</p> <h2 id="参考文章"><a href="#参考文章" class="header-anchor">#</a> 参考文章</h2> <p>参考文章</p> <ul><li>天明夜尽:https://juejin.im/post/5d1dab346fb9a07ec63b3249</li> <li>code秘密花园:https://juejin.im/post/5d6aa4f96fb9a06b112ad5b1</li> <li>极客时间的递归学习</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/fish-vuePress/webframe/javascript/exports.html" class="prev">
        exports和module.exports的区别
      </a></span> <span class="next"><a href="/fish-vuePress/webframe/javascript/unique.html">
        js中数组去重(面试如何回答)
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/fish-vuePress/assets/js/app.df5f89c4.js" defer></script><script src="/fish-vuePress/assets/js/5.edcfac08.js" defer></script><script src="/fish-vuePress/assets/js/121.8c4731cc.js" defer></script>
  </body>
</html>
