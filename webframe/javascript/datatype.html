<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>面试常问javascript数据类型 | 小鱼儿的博客</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="专注 Node.js 技术栈分享，从前端到Node.js再到数据库">
    
    <link rel="preload" href="/fish-vuePress/assets/css/0.styles.af3f7b63.css" as="style"><link rel="preload" href="/fish-vuePress/assets/js/app.960c0ef0.js" as="script"><link rel="preload" href="/fish-vuePress/assets/js/2.a7c701b2.js" as="script"><link rel="preload" href="/fish-vuePress/assets/js/62.2242a8b4.js" as="script"><link rel="prefetch" href="/fish-vuePress/assets/js/10.0f78eb6c.js"><link rel="prefetch" href="/fish-vuePress/assets/js/11.ebb2487e.js"><link rel="prefetch" href="/fish-vuePress/assets/js/12.52e94379.js"><link rel="prefetch" href="/fish-vuePress/assets/js/13.b238cea8.js"><link rel="prefetch" href="/fish-vuePress/assets/js/14.e132b3a9.js"><link rel="prefetch" href="/fish-vuePress/assets/js/15.747d533b.js"><link rel="prefetch" href="/fish-vuePress/assets/js/16.89300b7c.js"><link rel="prefetch" href="/fish-vuePress/assets/js/17.59807920.js"><link rel="prefetch" href="/fish-vuePress/assets/js/18.033c9513.js"><link rel="prefetch" href="/fish-vuePress/assets/js/19.230b8053.js"><link rel="prefetch" href="/fish-vuePress/assets/js/20.6739e841.js"><link rel="prefetch" href="/fish-vuePress/assets/js/21.afb111cf.js"><link rel="prefetch" href="/fish-vuePress/assets/js/22.96d782d8.js"><link rel="prefetch" href="/fish-vuePress/assets/js/23.0e594180.js"><link rel="prefetch" href="/fish-vuePress/assets/js/24.83089fe6.js"><link rel="prefetch" href="/fish-vuePress/assets/js/25.1b0c69e3.js"><link rel="prefetch" href="/fish-vuePress/assets/js/26.3469729f.js"><link rel="prefetch" href="/fish-vuePress/assets/js/27.f5713fab.js"><link rel="prefetch" href="/fish-vuePress/assets/js/28.3179bddf.js"><link rel="prefetch" href="/fish-vuePress/assets/js/29.0634a80e.js"><link rel="prefetch" href="/fish-vuePress/assets/js/3.64273e08.js"><link rel="prefetch" href="/fish-vuePress/assets/js/30.be7de9c6.js"><link rel="prefetch" href="/fish-vuePress/assets/js/31.e12e497c.js"><link rel="prefetch" href="/fish-vuePress/assets/js/32.01f433b3.js"><link rel="prefetch" href="/fish-vuePress/assets/js/33.8c980b4a.js"><link rel="prefetch" href="/fish-vuePress/assets/js/34.5c86cb8a.js"><link rel="prefetch" href="/fish-vuePress/assets/js/35.8ab7c1e1.js"><link rel="prefetch" href="/fish-vuePress/assets/js/36.2af554d3.js"><link rel="prefetch" href="/fish-vuePress/assets/js/37.4be84427.js"><link rel="prefetch" href="/fish-vuePress/assets/js/38.100d1140.js"><link rel="prefetch" href="/fish-vuePress/assets/js/39.ac2efbc8.js"><link rel="prefetch" href="/fish-vuePress/assets/js/4.11763c94.js"><link rel="prefetch" href="/fish-vuePress/assets/js/40.fb547904.js"><link rel="prefetch" href="/fish-vuePress/assets/js/41.01e9b61c.js"><link rel="prefetch" href="/fish-vuePress/assets/js/42.94a07f0c.js"><link rel="prefetch" href="/fish-vuePress/assets/js/43.870ca5e5.js"><link rel="prefetch" href="/fish-vuePress/assets/js/44.64c093ea.js"><link rel="prefetch" href="/fish-vuePress/assets/js/45.5211013b.js"><link rel="prefetch" href="/fish-vuePress/assets/js/46.617903de.js"><link rel="prefetch" href="/fish-vuePress/assets/js/47.b4a3f111.js"><link rel="prefetch" href="/fish-vuePress/assets/js/48.011d18bb.js"><link rel="prefetch" href="/fish-vuePress/assets/js/49.20176e8c.js"><link rel="prefetch" href="/fish-vuePress/assets/js/5.b81bfd52.js"><link rel="prefetch" href="/fish-vuePress/assets/js/50.b7b839e7.js"><link rel="prefetch" href="/fish-vuePress/assets/js/51.e5f693d3.js"><link rel="prefetch" href="/fish-vuePress/assets/js/52.a7f08211.js"><link rel="prefetch" href="/fish-vuePress/assets/js/53.bd2b6259.js"><link rel="prefetch" href="/fish-vuePress/assets/js/54.eeafd5e5.js"><link rel="prefetch" href="/fish-vuePress/assets/js/55.c0df0943.js"><link rel="prefetch" href="/fish-vuePress/assets/js/56.bda221f6.js"><link rel="prefetch" href="/fish-vuePress/assets/js/57.1269681d.js"><link rel="prefetch" href="/fish-vuePress/assets/js/58.1be0fc81.js"><link rel="prefetch" href="/fish-vuePress/assets/js/59.9a19628c.js"><link rel="prefetch" href="/fish-vuePress/assets/js/6.105fa903.js"><link rel="prefetch" href="/fish-vuePress/assets/js/60.91ad2234.js"><link rel="prefetch" href="/fish-vuePress/assets/js/61.b60f7bba.js"><link rel="prefetch" href="/fish-vuePress/assets/js/63.bb037e58.js"><link rel="prefetch" href="/fish-vuePress/assets/js/64.d72385a9.js"><link rel="prefetch" href="/fish-vuePress/assets/js/65.0dffac94.js"><link rel="prefetch" href="/fish-vuePress/assets/js/66.8f0899ce.js"><link rel="prefetch" href="/fish-vuePress/assets/js/67.05f4fdf6.js"><link rel="prefetch" href="/fish-vuePress/assets/js/68.e8b0764e.js"><link rel="prefetch" href="/fish-vuePress/assets/js/69.5ca63ae9.js"><link rel="prefetch" href="/fish-vuePress/assets/js/7.514531c3.js"><link rel="prefetch" href="/fish-vuePress/assets/js/70.6c3cab07.js"><link rel="prefetch" href="/fish-vuePress/assets/js/71.853bc0af.js"><link rel="prefetch" href="/fish-vuePress/assets/js/72.8ea506b4.js"><link rel="prefetch" href="/fish-vuePress/assets/js/73.2082f443.js"><link rel="prefetch" href="/fish-vuePress/assets/js/74.1d1b1175.js"><link rel="prefetch" href="/fish-vuePress/assets/js/75.da23d668.js"><link rel="prefetch" href="/fish-vuePress/assets/js/76.00fae968.js"><link rel="prefetch" href="/fish-vuePress/assets/js/77.63525f78.js"><link rel="prefetch" href="/fish-vuePress/assets/js/78.88b6aafe.js"><link rel="prefetch" href="/fish-vuePress/assets/js/8.80131140.js"><link rel="prefetch" href="/fish-vuePress/assets/js/9.aa22e2f1.js">
    <link rel="stylesheet" href="/fish-vuePress/assets/css/0.styles.af3f7b63.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/fish-vuePress/" class="home-link router-link-active"><!----> <span class="site-name">小鱼儿的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/fish-vuePress/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="小鱼儿" class="dropdown-title"><span class="title">小鱼儿</span> <span class="arrow down"></span></button> <button type="button" aria-label="小鱼儿" class="mobile-dropdown-title"><span class="title">小鱼儿</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fish-vuePress/node-zy/" class="nav-link">
  node
</a></li></ul></div></div><div class="nav-item"><a href="/fish-vuePress/node/" class="nav-link">
  node
</a></div><div class="nav-item"><a href="/fish-vuePress/webframe/" class="nav-link router-link-active">
  前端
</a></div><div class="nav-item"><a href="/fish-vuePress/database/" class="nav-link">
  数据库
</a></div><div class="nav-item"><a href="/fish-vuePress/android/" class="nav-link">
  android
</a></div><div class="nav-item"><a href="/fish-vuePress/interview/" class="nav-link">
  面试问题
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/fish-vuePress/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="小鱼儿" class="dropdown-title"><span class="title">小鱼儿</span> <span class="arrow down"></span></button> <button type="button" aria-label="小鱼儿" class="mobile-dropdown-title"><span class="title">小鱼儿</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fish-vuePress/node-zy/" class="nav-link">
  node
</a></li></ul></div></div><div class="nav-item"><a href="/fish-vuePress/node/" class="nav-link">
  node
</a></div><div class="nav-item"><a href="/fish-vuePress/webframe/" class="nav-link router-link-active">
  前端
</a></div><div class="nav-item"><a href="/fish-vuePress/database/" class="nav-link">
  数据库
</a></div><div class="nav-item"><a href="/fish-vuePress/android/" class="nav-link">
  android
</a></div><div class="nav-item"><a href="/fish-vuePress/interview/" class="nav-link">
  面试问题
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/fish-vuePress/webframe/" aria-current="page" class="sidebar-link">前端</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>css</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>javascript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fish-vuePress/webframe/javascript/" aria-current="page" class="sidebar-link">目录</a></li><li><a href="/fish-vuePress/webframe/javascript/datatype.html" aria-current="page" class="active sidebar-link">数据类型]面试常问javascript数据类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fish-vuePress/webframe/javascript/datatype.html#前言" class="sidebar-link">前言</a></li><li class="sidebar-sub-header"><a href="/fish-vuePress/webframe/javascript/datatype.html#快速导航" class="sidebar-link">快速导航</a></li><li class="sidebar-sub-header"><a href="/fish-vuePress/webframe/javascript/datatype.html#js中的数据类型" class="sidebar-link">js中的数据类型</a></li></ul></li><li><a href="/fish-vuePress/webframe/javascript/scoped.html" class="sidebar-link">[作用域]作用域于作用域链</a></li><li><a href="/fish-vuePress/webframe/javascript/closure.html" class="sidebar-link">javascript中的闭包这一篇就够了</a></li><li><a href="/fish-vuePress/webframe/javascript/higherFunc.html" class="sidebar-link">[高阶函数]高阶函数详解与实战训练</a></li><li><a href="/fish-vuePress/webframe/javascript/copy.html" class="sidebar-link">[赋值拷贝]js中赋值•浅拷贝•深拷贝</a></li><li><a href="/fish-vuePress/webframe/javascript/prototype.html" class="sidebar-link">javascript中原型链</a></li><li><a href="/fish-vuePress/webframe/javascript/this.html" class="sidebar-link">如何答一道惊艳面试官的数组去重问题？</a></li><li><a href="/fish-vuePress/webframe/javascript/exports.html" class="sidebar-link">exports和module.exports的区别</a></li><li><a href="/fish-vuePress/webframe/javascript/recircleFun.html" class="sidebar-link">聊聊面试必考-递归思想与实战</a></li><li><a href="/fish-vuePress/webframe/javascript/unique.html" class="sidebar-link">js中数组去重(面试如何回答)</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>es6</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>tool</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <p>之前面试了几个开发者，他们确实做过不少项目，能力也是不错的，但是发现js基础不扎实, 于是决定写一下这篇javascrip数据类型相关的基础文章，其实也不仅仅是因为面试了他们，之前自己在面试的时候，也曾经被虐过，面试官说过的最深刻的一句话我到现在都记得。</p> <blockquote><p>基础很重要，只有基础好才会很少出<code>bug</code>，大多数的<code>bug</code>都是基础不扎实造成的。</p></blockquote> <h2 id="快速导航"><a href="#快速导航" class="header-anchor">#</a> 快速导航</h2> <ul><li><a href="#%E5%B8%B8%E8%A7%81%E9%9D%A2%E8%AF%95%E9%A2%98"><code>[问题引出]</code> 常见面试题</a></li> <li><a href="#js%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">js中的数据类型</a> <ul><li><a href="#%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B">基本类型</a></li> <li><a href="#%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B">对象类型</a></li></ul></li> <li><a href="#js%E5%BC%B1%E7%B1%BB%E5%9E%8B%E8%AF%AD%E8%A8%80">js弱类型语言</a></li> <li><a href="#js%E4%B8%AD%E7%9A%84%E5%BC%BA%E5%88%B6%E8%BD%AC%E6%8D%A2%E8%A7%84%E5%88%99">js中的强制转换规则</a> <ul><li><a href="#ToPrimitive(%E8%BD%AC%E6%8D%A2%E4%B8%BA%E5%8E%9F%E5%A7%8B%E5%80%BC)">ToPrimitive(转换为原始值)</a></li> <li><a href="#toString">toString</a></li> <li><a href="#valueOf">valueOf</a></li> <li><a href="#Number">Number</a></li> <li><a href="#String">String</a></li> <li><a href="#Boolean">Boolean</a></li></ul></li> <li><a href="#js%E8%BD%AC%E6%8D%A2%E8%A7%84%E5%88%99%E4%B8%8D%E5%90%8C%E5%9C%BA%E6%99%AF%E5%BA%94%E7%94%A8">js转换规则不同场景应用</a></li> <li><a href="#js%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%88%A4%E6%96%AD">js中的数据类型判断</a></li> <li><a href="#NaN%E7%9B%B8%E5%85%B3%E6%80%BB%E7%BB%93">NaN相关总结</a></li> <li><a href="#%E8%AF%AF%E5%8C%BA">误区</a></li></ul> <h3 id="常见面试题"><a href="#常见面试题" class="header-anchor">#</a> 常见面试题</h3> <p>这里给出两道我们公司数据类型基础相关的面试题和答案，如果都能做对并且知道为什么（可以选择忽略本文章）：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//类型转换相关问题</span>
<span class="token keyword">var</span> bar<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bar<span class="token operator">+</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bar<span class="token operator">+</span><span class="token string">&quot;xyz&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bar<span class="token operator">+</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bar<span class="token operator">+</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token operator">&gt;</span>bar<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">+</span><span class="token string">'2'</span><span class="token operator">+</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'2'</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token string">'koala'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span>
   a<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
   b<span class="token operator">:</span><span class="token number">2</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'2'</span><span class="token operator">+</span>obj1<span class="token punctuation">)</span>；

<span class="token keyword">var</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">toString</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'a'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'2'</span><span class="token operator">+</span>obj2<span class="token punctuation">)</span>

<span class="token comment">//输出结果  1 truexyz 2 1 false 12false 2koala,1 2[object Object] 2a</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//作用域和NaN 这里不具体讲作用域，意在说明NaN</span>
<span class="token keyword">var</span> b<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> b<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        b<span class="token operator">++</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> b<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//输出结果 NaN</span>
</code></pre></div><p>本篇文章会以一个面试官问问题的角度来进行分析讲解</p> <h2 id="js中的数据类型"><a href="#js中的数据类型" class="header-anchor">#</a> js中的数据类型</h2> <blockquote><p>面试官：说一说<code>javascript</code>中有哪些数据类型?</p></blockquote> <p><code>JavaScript</code> 中共有七种内置数据类型，包括<strong>基本类型</strong>和<strong>对象类型</strong>。</p> <h3 id="基本类型"><a href="#基本类型" class="header-anchor">#</a> 基本类型</h3> <p>基本类型分为以下六种：</p> <ul><li>string（字符串）</li> <li>boolean（布尔值）</li> <li>number（数字）</li> <li>symbol（符号）</li> <li>null（空值）</li> <li>undefined（未定义）</li></ul> <p><strong>注意</strong>：</p> <ol><li><p><code>string</code> 、<code>number</code> 、<code>boolean</code> 和 <code>null</code> <code>undefined</code> 这五种类型统称为<strong>原始类型</strong>（Primitive），表示不能再细分下去的基本类型;</p></li> <li><p><code>symbol</code>是ES6中新增的数据类型，<code>symbol</code> 表示独一无二的值，通过 <code>Symbol</code> 函数调用生成，由于生成的 symbol 值为原始类型，所以 <code>Symbol</code> 函数不能使用<code>new</code> 调用；</p></li> <li><p><code>null</code> 和 <code>undefined</code> 通常被认为是特殊值，这两种类型的值唯一，就是其本身。</p></li></ol> <h3 id="对象类型"><a href="#对象类型" class="header-anchor">#</a> 对象类型</h3> <p>对象类型也叫引用类型，<code>array</code>和<code>function</code>是对象的子类型。对象在逻辑上是属性的无序集合，是存放各种值的容器。对象值存储的是引用地址，所以和基本类型值不可变的特性不同，对象值是可变的。</p> <h1 id="js弱类型语言"><a href="#js弱类型语言" class="header-anchor">#</a> js弱类型语言</h1> <blockquote><p>面试官：说说你对<code>javascript</code>是弱类型语言的理解?</p></blockquote> <p><code>JavaScript</code> 是弱类型语言，而且<code>JavaScript</code> 声明变量的时候并没有预先确定的类型，变量的类型就是其值的类型，也就是说<strong>变量当前的类型由其值所决定</strong>,夸张点说上一秒种的<code>String</code>，下一秒可能就是个<code>Number</code>类型了，这个过程可能就进行了某些操作发生了强制类型转换。虽然弱类型的这种<strong>不需要预先确定类型</strong>的特性给我们带来了便利，同时也会给我们带来困扰，为了能充分利用该特性就必须掌握类型转换的原理。</p> <h1 id="js中的强制转换规则"><a href="#js中的强制转换规则" class="header-anchor">#</a> js中的强制转换规则</h1> <blockquote><p>面试官：<code>javascript</code>中强制类型转换是一个非常易出现<code>bug</code>的点，知道强制转换时候的规则吗？</p></blockquote> <p>注：规则最好配合下面什么时候发生转换使用这些规则看效果更佳。</p> <h3 id="toprimitive-转换为原始值"><a href="#toprimitive-转换为原始值" class="header-anchor">#</a> <code>ToPrimitive</code>(转换为原始值)</h3> <p><code>ToPrimitive</code>对原始类型不发生转换处理，只<strong>针对引用类型（object）的</strong>，其目的是将引用类型（object）转换为非对象类型，也就是原始类型。</p> <p><code>ToPrimitive</code> 运算符<strong>接受一个值，和一个可选的期望类型作参数</strong>。<code>ToPrimitive</code> 运算符将值转换为非对象类型，如果对象有能力被转换为不止一种原始类型，可以使用可选的 <strong>期望类型</strong> 来暗示那个类型。</p> <p>转换后的结果<strong>原始类型</strong>是由期望类型决定的，期望类型其实就是我们传递的<code>type</code>。直接看下面比较清楚。
<code>ToPrimitive</code>方法大概长这么个样子具体如下。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/**
* @obj 需要转换的对象
* @type 期望转换为的原始数据类型，可选
*/</span>
<span class="token function">ToPrimitive</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span>type<span class="token punctuation">)</span>
</code></pre></div><h5 id="type不同值的说明"><a href="#type不同值的说明" class="header-anchor">#</a> type不同值的说明</h5> <ul><li>type为<code>string</code>:</li></ul> <ol><li>先调用<code>obj</code>的<code>toString</code>方法，如果为原始值，则<code>return</code>，否则进行第2步</li> <li>调用<code>obj</code>的<code>valueOf</code>方法，如果为原始值，则<code>return</code>，否则进行第3步</li> <li>抛出<code>TypeError</code> 异常</li></ol> <ul><li>type为<code>number</code>:</li></ul> <ol><li>先调用<code>obj</code>的<code>valueOf</code>方法，如果为原始值，则<code>return</code>，否则进行第2步</li> <li>调用<code>obj</code>的<code>toString</code>方法，如果为原始值，则<code>return</code>，否则第3步</li> <li>抛出<code>TypeError</code> 异常</li></ol> <ul><li>type参数为空</li></ul> <ol><li>该对象为<code>Date</code>，则type被设置为<code>String</code></li> <li>否则，type被设置为<code>Number</code></li></ol> <h5 id="date数据类型特殊说明"><a href="#date数据类型特殊说明" class="header-anchor">#</a> Date数据类型特殊说明：</h5> <p>对于<code>Date</code>数据类型，我们更多期望获得的是其转为时间后的字符串，而非毫秒值（时间戳），如果为<code>number</code>，则会取到对应的毫秒值，显然字符串使用更多。
其他类型对象按照取值的类型操作即可。</p> <h5 id="toprimitive总结"><a href="#toprimitive总结" class="header-anchor">#</a> <code>ToPrimitive</code>总结</h5> <p><code>ToPrimitive</code>转成何种原始类型，取决于type，type参数可选，若指定，则按照指定类型转换，若不指定，默认根据实用情况分两种情况，<code>Date</code>为<code>string</code>，其余对象为<code>number</code>。那么什么时候会指定type类型呢，那就要看下面两种转换方式了。</p> <h3 id="tostring"><a href="#tostring" class="header-anchor">#</a> toString</h3> <p><strong>Object.prototype.toString()</strong></p> <p><code>toString()</code>方法返回一个表示该对象的字符串。</p> <p>每个对象都有一个 <code>toString()</code> 方法，当对象被表示为文本值时或者当以期望字符串的方式引用对象时，该方法被自动调用。</p> <p>这里先记住，<code>valueOf()</code> 和 <code>toString()</code>在特定的场合下会自行调用。</p> <h3 id="valueof"><a href="#valueof" class="header-anchor">#</a> valueOf</h3> <p><code>Object.prototype.valueOf()</code>方法返回指定对象的原始值。</p> <p><code>JavaScript</code> 调用 <code>valueOf()</code> 方法用来把对象转换成原始类型的值（数值、字符串和布尔值）。但是我们很少需要自己调用此函数，<code>valueOf</code> 方法一般都会被 <code>JavaScript</code> 自动调用。</p> <p>不同内置对象的<code>valueOf</code>实现：</p> <ul><li>String =&gt; 返回字符串值</li> <li>Number =&gt; 返回数字值</li> <li>Date =&gt; 返回一个数字，即时间值,字符串中内容是依赖于具体实现的</li> <li>Boolean =&gt; 返回Boolean的this值</li> <li>Object =&gt; 返回this</li></ul> <p>对照代码会更清晰一些：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">'123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//123</span>

<span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//123</span>

<span class="token keyword">var</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1526990889729</span>

<span class="token keyword">var</span> bool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token string">'123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bool<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span>

<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token function-variable function">valueOf</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1</span>
</code></pre></div><h3 id="number"><a href="#number" class="header-anchor">#</a> Number</h3> <p><code>Number</code>运算符转换规则：</p> <ul><li><code>null</code> 转换为 0</li> <li><code>undefined</code> 转换为 <code>NaN</code></li> <li><code>true</code> 转换为 1，<code>false</code> 转换为 0</li> <li>字符串转换时遵循数字常量规则，转换失败返回<code>NaN</code></li></ul> <blockquote><p>注意：对象这里要先转换为原始值，调用<code>ToPrimitive</code>转换，type指定为<code>number</code>了，继续回到<code>ToPrimitive</code>进行转换。</p></blockquote> <h3 id="string"><a href="#string" class="header-anchor">#</a> String</h3> <p><code>String</code> 运算符转换规则</p> <ul><li><code>null</code> 转换为 <code>'null'</code></li> <li><code>undefined</code> 转换为 <code>undefined</code></li> <li><code>true</code> 转换为 <code>'true'</code>，<code>false</code> 转换为 <code>'false'</code></li> <li>数字转换遵循通用规则，极大极小的数字使用指数形式</li></ul> <blockquote><p>注意：对象这里要先转换为原始值，调用<code>ToPrimitive</code>转换，<code>type</code>就指定为<code>string</code>了，继续回到<code>ToPrimitive</code>进行转换(上面有将到<code>ToPrimitive</code>的转换规则)。</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">String</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>                 <span class="token comment">// 'null'</span>
<span class="token function">String</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span>            <span class="token comment">// 'undefined'</span>
<span class="token function">String</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>                 <span class="token comment">// 'true'</span>
<span class="token function">String</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>                    <span class="token comment">// '1'</span>
<span class="token function">String</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>                   <span class="token comment">// '-1'</span>
<span class="token function">String</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>                    <span class="token comment">// '0'</span>
<span class="token function">String</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">)</span>                   <span class="token comment">// '0'</span>
<span class="token function">String</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// '1e+30'</span>
<span class="token function">String</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span>             <span class="token comment">// 'Infinity'</span>
<span class="token function">String</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">Infinity</span><span class="token punctuation">)</span>            <span class="token comment">// '-Infinity'</span>
<span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>                   <span class="token comment">// '[object Object]'</span>
<span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token comment">// '1,2,3'</span>
<span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'koala'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>          <span class="token comment">//koala,1</span>
</code></pre></div><h3 id="boolean"><a href="#boolean" class="header-anchor">#</a> Boolean</h3> <p><code>ToBoolean</code> 运算符转换规则</p> <p>除了下述 6 个值转换结果为 <code>false</code>，其他全部为<code>true</code>：</p> <ol><li>undefined</li> <li>null</li> <li>-0</li> <li>0或+0</li> <li>NaN</li> <li>''（空字符串）</li></ol> <p>假值以外的值都是真值。其中包括所有对象（包括空对象）的转换结果都是<code>true</code>，甚至连<code>false</code>对应的布尔对象<code>new Boolean(false)</code>也是<code>true</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
<span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
<span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
<span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
<span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span> <span class="token comment">// false</span>

<span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><h1 id="js转换规则不同场景应用"><a href="#js转换规则不同场景应用" class="header-anchor">#</a> js转换规则不同场景应用</h1> <blockquote><p>面试官问：知道了具体转换成什么的规则，但是都在什么情况下发生什么样的转换呢？</p></blockquote> <h3 id="什么时候自动转换为string类型"><a href="#什么时候自动转换为string类型" class="header-anchor">#</a> 什么时候自动转换为string类型</h3> <ul><li><p>在没有对象的前提下</p> <p>字符串的自动转换，主要发生在字符串的<strong>加法运算</strong>时。当一个值为字符串，另一个值为非字符串，则后者转为字符串。</p></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">'2'</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token comment">// '21'</span>
<span class="token string">'2'</span> <span class="token operator">+</span> <span class="token boolean">true</span> <span class="token comment">// &quot;2true&quot;</span>
<span class="token string">'2'</span> <span class="token operator">+</span> <span class="token boolean">false</span> <span class="token comment">// &quot;2false&quot;</span>
<span class="token string">'2'</span> <span class="token operator">+</span> <span class="token keyword">undefined</span> <span class="token comment">// &quot;2undefined&quot;</span>
<span class="token string">'2'</span> <span class="token operator">+</span> <span class="token keyword">null</span> <span class="token comment">// &quot;2null&quot;</span>
</code></pre></div><ul><li>当有对象且与对象<code>+</code>时候</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//toString的对象</span>
<span class="token keyword">var</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">toString</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'a'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'2'</span><span class="token operator">+</span>obj2<span class="token punctuation">)</span>
<span class="token comment">//输出结果2a</span>

<span class="token comment">//常规对象</span>
<span class="token keyword">var</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span>
   a<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
   b<span class="token operator">:</span><span class="token number">2</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'2'</span><span class="token operator">+</span>obj1<span class="token punctuation">)</span>；
<span class="token comment">//输出结果 2[object Object]</span>

<span class="token comment">//几种特殊对象</span>
<span class="token string">'2'</span> <span class="token operator">+</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// &quot;2[object Object]&quot;</span>
<span class="token string">'2'</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// &quot;2&quot;</span>
<span class="token string">'2'</span> <span class="token operator">+</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// &quot;2function (){}&quot;</span>
<span class="token string">'2'</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token string">'koala'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">// 2koala,1</span>
</code></pre></div><p>对下面<code>'2'+obj2</code>详细举例说明如下：</p> <ol><li>左边为<code>string</code>，<code>ToPrimitive</code>原始值转换后不发生变化</li> <li>右边转化时同样按照<code>ToPrimitive</code>进行原始值转换，由于指定的type是<code>number</code>，进行<code>ToPrimitive</code>转化调用<code>obj2.valueof()</code>,得到的不是原始值，进行第三步</li> <li>调用<code>toString()</code> <code>return 'a'</code></li> <li>符号两边存在<code>string</code>，而且是<code>+</code>号运算符则都采用<code>String</code>规则转换为<code>string</code>类型进行拼接</li> <li>输出结果<code>2a</code></li></ol> <p>对下面<code>'2'+obj1</code>详细举例说明如下：</p> <ol><li>左边为<code>string</code>，<code>ToPrimitive</code>转换为原始值后不发生变化</li> <li>右边转化时同样按照<code>ToPrimitive</code>进行原始值转换，由于指定的type是<code>number</code>，进行<code>ToPrimitive</code>转化调用<code>obj2.valueof()</code>,得到<code>{ a: 1, b: 2 }</code></li> <li>调用<code>toString()</code> <code>return [object Object]</code></li> <li>符号两边存在<code>string</code>，而且是+号运算符则都采用<code>String</code>规则转换为<code>string</code>类型进行拼接</li> <li>输出结果<code>2[object Object]</code></li></ol> <p>代码中几种特殊对象的转换规则基本相同，就不一一说明，大家可以想一下流程。</p> <p>注意：不管是对象还不是对象，都有一个转换为原始值的过程，也就<code>是ToPrimitive</code>转换，只不过原始类型转换后不发生变化，对象类型才会发生具体转换。</p> <h4 id="string类型转换开发过程中可能出错的点"><a href="#string类型转换开发过程中可能出错的点" class="header-anchor">#</a> string类型转换开发过程中可能出错的点：</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  width<span class="token operator">:</span> <span class="token string">'100'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

obj<span class="token punctuation">.</span>width <span class="token operator">+</span> <span class="token number">20</span> <span class="token comment">// &quot;10020&quot;</span>

</code></pre></div><p>预期输出结果120 实际输出结果10020</p> <h3 id="什么时候自动转换为number类型"><a href="#什么时候自动转换为number类型" class="header-anchor">#</a> 什么时候自动转换为Number类型</h3> <ul><li><p>有加法运算符，但是无<code>String</code>类型的时候，都会优先转换为<code>Number</code>类型</p> <p>例子：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token boolean">true</span> <span class="token operator">+</span> <span class="token number">0</span> <span class="token comment">// 1</span>
<span class="token boolean">true</span> <span class="token operator">+</span> <span class="token boolean">true</span> <span class="token comment">// 2</span>
<span class="token boolean">true</span> <span class="token operator">+</span> <span class="token boolean">false</span> <span class="token comment">//1</span>
</code></pre></div></li> <li><p><strong>除了加法运算符，其他运算符都会把运算自动转成数值。</strong>
例子：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">'5'</span> <span class="token operator">-</span> <span class="token string">'2'</span> <span class="token comment">// 3</span>
<span class="token string">'5'</span> <span class="token operator">*</span> <span class="token string">'2'</span> <span class="token comment">// 10</span>
<span class="token boolean">true</span> <span class="token operator">-</span> <span class="token number">1</span>  <span class="token comment">// 0</span>
<span class="token boolean">false</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token comment">// -1</span>
<span class="token string">'1'</span> <span class="token operator">-</span> <span class="token number">1</span>   <span class="token comment">// 0</span>
<span class="token string">'5'</span> <span class="token operator">*</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token comment">// 0</span>
<span class="token boolean">false</span> <span class="token operator">/</span> <span class="token string">'5'</span> <span class="token comment">// 0</span>
<span class="token string">'abc'</span> <span class="token operator">-</span> <span class="token number">1</span>   <span class="token comment">// NaN</span>
<span class="token keyword">null</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token comment">// 1</span>
<span class="token keyword">undefined</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token comment">// NaN</span>

<span class="token comment">//一元运算符（注意点）</span>
<span class="token operator">+</span><span class="token string">'abc'</span> <span class="token comment">// NaN</span>
<span class="token operator">-</span><span class="token string">'abc'</span> <span class="token comment">// NaN</span>
<span class="token operator">+</span><span class="token boolean">true</span> <span class="token comment">// 1</span>
<span class="token operator">-</span><span class="token boolean">false</span> <span class="token comment">// 0</span>
</code></pre></div></li></ul> <blockquote><p>注意：<code>null</code>转为数值时为0，而<code>undefined</code>转为数值时为<code>NaN</code>。</p></blockquote> <h4 id="判断等号也放在number里面特殊说明"><a href="#判断等号也放在number里面特殊说明" class="header-anchor">#</a> 判断等号也放在<code>Number</code>里面特殊说明</h4> <p>== 抽象相等比较与+运算符不同，不再是<code>String</code>优先，而是<code>Number</code>优先。
下面列举<code>x == y</code>的例子</p> <ol><li>如果<code>x</code>,<code>y</code>均为<code>number</code>，直接比较
没什么可解释的了</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token number">1</span> <span class="token operator">==</span> <span class="token number">2</span> <span class="token comment">//false</span>
</code></pre></div><ol start="2"><li>如果存在对象，<code>ToPrimitive()</code>type为<code>number</code>进行转换，再进行后面比较</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">valueOf</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">'1'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token number">1</span> <span class="token operator">==</span> obj1  <span class="token comment">//true</span>
<span class="token comment">//obj1转为原始值，调用obj1.valueOf()</span>
<span class="token comment">//返回原始值'1'</span>
<span class="token comment">//'1'toNumber得到 1 然后比较 1 == 1</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">!</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">//true</span>
<span class="token comment">//[]作为对象ToPrimitive得到 ''  </span>
<span class="token comment">//![]作为boolean转换得到0 </span>
<span class="token comment">//'' == 0 </span>
<span class="token comment">//转换为 0==0 //true</span>
</code></pre></div><ol start="3"><li>存在<code>boolean</code>，按照<code>ToNumber</code>将<code>boolean</code>转换为1或者0，再进行后面比较</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//boolean 先转成number，按照上面的规则得到1  </span>
<span class="token comment">//3 == 1 false</span>
<span class="token comment">//0 == 0 true</span>
<span class="token number">3</span> <span class="token operator">==</span> <span class="token boolean">true</span> <span class="token comment">// false</span>
<span class="token string">'0'</span> <span class="token operator">==</span> <span class="token boolean">false</span> <span class="token comment">//true</span>
</code></pre></div><p>4.如果<code>x</code>为<code>string</code>，<code>y</code>为<code>number</code>，<code>x</code>转成<code>number</code>进行比较</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//'0' toNumber()得到 0  </span>
<span class="token comment">//0 == 0 true</span>
<span class="token string">'0'</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token comment">//true</span>
</code></pre></div><h3 id="什么时候进行布尔转换"><a href="#什么时候进行布尔转换" class="header-anchor">#</a> 什么时候进行布尔转换</h3> <ul><li>布尔比较时</li> <li><code>if(obj)</code> , <code>while(obj)</code>等判断时或者 三元运算符只能够包含布尔值</li></ul> <p>条件部分的每个值都相当于<code>false</code>，使用否定运算符后，就变成了<code>true</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span><span class="token keyword">undefined</span>
  <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token keyword">null</span>
  <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token number">0</span>
  <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token number">NaN</span>
  <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token string">''</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'true'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token comment">// true</span>

<span class="token comment">//下面两种情况也会转成布尔类型</span>
expression <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token operator">!</span><span class="token operator">!</span> expression
</code></pre></div><h1 id="js中的数据类型判断"><a href="#js中的数据类型判断" class="header-anchor">#</a> js中的数据类型判断</h1> <blockquote><p>面试官问：如何判断数据类型？怎么判断一个值到底是数组类型还是对象?</p></blockquote> <p>三种方式，分别为 <code>typeof</code>、<code>instanceof</code> 和<code>Object.prototype.toString()</code></p> <h3 id="typeof"><a href="#typeof" class="header-anchor">#</a> typeof</h3> <p>通过 <code>typeof</code>操作符来判断一个值属于哪种基本类型。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">typeof</span> <span class="token string">'seymoe'</span>    <span class="token comment">// 'string'</span>
<span class="token keyword">typeof</span> <span class="token boolean">true</span>        <span class="token comment">// 'boolean'</span>
<span class="token keyword">typeof</span> <span class="token number">10</span>          <span class="token comment">// 'number'</span>
<span class="token keyword">typeof</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">// 'symbol'</span>
<span class="token keyword">typeof</span> <span class="token keyword">null</span>        <span class="token comment">// 'object' 无法判定是否为 null</span>
<span class="token keyword">typeof</span> <span class="token keyword">undefined</span>   <span class="token comment">// 'undefined'</span>

<span class="token keyword">typeof</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>           <span class="token comment">// 'object'</span>
<span class="token keyword">typeof</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>           <span class="token comment">// 'object'</span>
<span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token comment">// 'function'</span>
</code></pre></div><p>上面代码的输出结果可以看出，</p> <ol><li><p><code>null</code> 的判定有误差，得到的结果
如果使用 <code>typeof</code>，<code>null</code>得到的结果是<code>object</code></p></li> <li><p>操作符对对象类型及其子类型，例如函数（可调用对象）、数组（有序索引对象）等进行判定，则除了函数都会得到 <code>object</code> 的结果。</p></li></ol> <p>综上可以看出<code>typeOf</code>对于判断类型还有一些不足，在对象的子类型和<code>null</code>情况下。</p> <h3 id="instanceof"><a href="#instanceof" class="header-anchor">#</a> instanceof</h3> <p>通过 <code>instanceof</code> 操作符也可以对对象类型进行判定，其原理就是测试构造函数的<code>prototype</code> 是否出现在被检测对象的原型链上。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Array</span>            <span class="token comment">// true</span>
<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token keyword">instanceof</span> <span class="token class-name">Object</span>         <span class="token comment">// true</span>
<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token keyword">instanceof</span> <span class="token class-name">Function</span>   <span class="token comment">// true</span>
</code></pre></div><p>复制代码注意：<code>instanceof</code> 也不是万能的。
举个例子：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
arr <span class="token keyword">instanceof</span> <span class="token class-name">Array</span>    <span class="token comment">// true</span>
arr <span class="token keyword">instanceof</span> <span class="token class-name">Object</span>   <span class="token comment">// true</span>
obj <span class="token keyword">instanceof</span> <span class="token class-name">Object</span>   <span class="token comment">// true</span>
</code></pre></div><p>在这个例子中，<code>arr</code> 数组相当于 <code>new Array()</code> 出的一个实例，所以 <code>arr.__proto__ === Array.prototype</code>，又因为 <code>Array</code>属于 <code>Object</code> 子类型，即<code>Array.prototype.__proto__ === Object.prototype</code>，因此 <code>Object</code> 构造函数在 <code>arr</code> 的原型链上。所以 <code>instanceof</code> 仍然无法优雅的判断一个值到底属于数组还是普通对象。</p> <p>还有一点需要说明下，有些开发者会说 <code>Object.prototype.__proto__ === null</code>，岂不是说 <code>arr instanceof null</code> 也应该为 <code>true</code>，这个语句其实会报错提示右侧参数应该为对象，这也印证 <code>typeof null</code> 的结果为 <code>object</code> 真的只是<code>javascript</code>中的一个<code>bug</code> 。</p> <h3 id="object-prototype-tostring"><a href="#object-prototype-tostring" class="header-anchor">#</a> Object.prototype.toString()</h3> <p><code>Object.prototype.toString()</code> 可以说是判定 <code>JavaScript</code> 中数据类型的终极解决方法了，具体用法请看以下代码：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>              <span class="token comment">// '[object Object]'</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>              <span class="token comment">// '[object Array]'</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>        <span class="token comment">// '[object Function]'</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'seymoe'</span><span class="token punctuation">)</span>        <span class="token comment">// '[object String]'</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>               <span class="token comment">// '[object Number]'</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>            <span class="token comment">// '[object Boolean]'</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment">// '[object Symbol]'</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>            <span class="token comment">// '[object Null]'</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span>       <span class="token comment">// '[object Undefined]'</span>

<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token comment">// '[object Date]'</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>Math<span class="token punctuation">)</span>            <span class="token comment">// '[object Math]'</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>       <span class="token comment">// '[object Set]'</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">WeakSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">// '[object WeakSet]'</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>       <span class="token comment">// '[object Map]'</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">// '[object WeakMap]'</span>
</code></pre></div><p>我们可以发现该方法在传入任何类型的值都能返回对应准确的对象类型。用法虽简单明了，但其中有几个点需要理解清楚：</p> <ul><li>该方法本质就是依托<code>Object.prototype.toString()</code>方法得到对象内部属性 <code>[[Class]]</code></li> <li>传入原始类型却能够判定出结果是因为对值进行了包装</li> <li><code>null</code> 和 <code>undefined</code> 能够输出结果是内部实现有做处理</li></ul> <h1 id="nan相关总结"><a href="#nan相关总结" class="header-anchor">#</a> NaN相关总结</h1> <h3 id="nan的概念"><a href="#nan的概念" class="header-anchor">#</a> <code>NaN</code>的概念</h3> <p><code>NaN</code> 是一个全局对象的属性，<code>NaN</code> 是一个全局对象的属性，<code>NaN</code>是一种特殊的<code>Number</code>类型。</p> <h3 id="什么时候返回nan-开篇第二道题也得到解决"><a href="#什么时候返回nan-开篇第二道题也得到解决" class="header-anchor">#</a> 什么时候返回NaN （开篇第二道题也得到解决）</h3> <ul><li>无穷大除以无穷大</li> <li>给任意负数做开方运算</li> <li>算数运算符与不是数字或无法转换为数字的操作数一起使用</li> <li>字符串解析成数字</li></ul> <p>一些例子：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token number">Infinity</span> <span class="token operator">/</span> <span class="token number">Infinity</span><span class="token punctuation">;</span>   <span class="token comment">// 无穷大除以无穷大</span>
Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// 给任意负数做开方运算</span>
<span class="token string">'a'</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>               <span class="token comment">// 算数运算符与不是数字或无法转换为数字的操作数一起使用</span>
<span class="token string">'a'</span> <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token string">'a'</span> <span class="token operator">/</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// 字符串解析成数字</span>
<span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">Number</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//NaN</span>
<span class="token string">'abc'</span> <span class="token operator">-</span> <span class="token number">1</span>   <span class="token comment">// NaN</span>
<span class="token keyword">undefined</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token comment">// NaN</span>
<span class="token comment">//一元运算符（注意点）</span>
<span class="token operator">+</span><span class="token string">'abc'</span> <span class="token comment">// NaN</span>
<span class="token operator">-</span><span class="token string">'abc'</span> <span class="token comment">// NaN</span>
</code></pre></div><h1 id="误区"><a href="#误区" class="header-anchor">#</a> 误区</h1> <h3 id="tostring和string的区别"><a href="#tostring和string的区别" class="header-anchor">#</a> <code>toString</code>和<code>String</code>的区别</h3> <ul><li><code>toString</code></li></ul> <ol><li><p><code>toString()</code>可以将数据都转为字符串，但是<code>null</code>和<code>undefined</code>不可以转换。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">//报错 TypeError: Cannot read property 'toString' of null</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">//报错 TypeError: Cannot read property 'toString' of undefined</span>
</code></pre></div></li> <li><p><code>toString()</code>括号中可以写数字，代表进制</p> <p>二进制：.toString(2);</p> <p>八进制：.toString(8);</p> <p>十进制：.toString(10);</p> <p>十六进制：.toString(16);</p></li></ol> <ul><li><code>String</code></li></ul> <ol><li><p><code>String()</code>可以将<code>null</code>和<code>undefined</code>转换为字符串，但是没法转进制字符串</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// null</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// undefined</span>
</code></pre></div></li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/fish-vuePress/webframe/javascript/" class="prev router-link-active">
        目录
      </a></span> <span class="next"><a href="/fish-vuePress/webframe/javascript/scoped.html">
        [作用域]作用域于作用域链
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/fish-vuePress/assets/js/app.960c0ef0.js" defer></script><script src="/fish-vuePress/assets/js/2.a7c701b2.js" defer></script><script src="/fish-vuePress/assets/js/62.2242a8b4.js" defer></script>
  </body>
</html>
