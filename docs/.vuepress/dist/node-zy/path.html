<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>node核心模块 -文件路径path | 小鱼儿的博客</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="专注 Node.js 技术栈分享，从前端到Node.js再到数据库">
    
    <link rel="preload" href="/fish-vuePress/assets/css/0.styles.ea34a56d.css" as="style"><link rel="preload" href="/fish-vuePress/assets/js/app.e911428d.js" as="script"><link rel="preload" href="/fish-vuePress/assets/js/2.9e5a7c68.js" as="script"><link rel="preload" href="/fish-vuePress/assets/js/62.f5922297.js" as="script"><link rel="prefetch" href="/fish-vuePress/assets/js/10.6bddd781.js"><link rel="prefetch" href="/fish-vuePress/assets/js/100.7bb42e5d.js"><link rel="prefetch" href="/fish-vuePress/assets/js/101.670e9999.js"><link rel="prefetch" href="/fish-vuePress/assets/js/102.d353353d.js"><link rel="prefetch" href="/fish-vuePress/assets/js/103.68978430.js"><link rel="prefetch" href="/fish-vuePress/assets/js/104.1821a78a.js"><link rel="prefetch" href="/fish-vuePress/assets/js/105.91bba974.js"><link rel="prefetch" href="/fish-vuePress/assets/js/106.2d8fb96e.js"><link rel="prefetch" href="/fish-vuePress/assets/js/107.7d9dbeee.js"><link rel="prefetch" href="/fish-vuePress/assets/js/108.d69744d3.js"><link rel="prefetch" href="/fish-vuePress/assets/js/109.2e1153ed.js"><link rel="prefetch" href="/fish-vuePress/assets/js/11.a30700f2.js"><link rel="prefetch" href="/fish-vuePress/assets/js/110.07d93d7c.js"><link rel="prefetch" href="/fish-vuePress/assets/js/111.c12f067f.js"><link rel="prefetch" href="/fish-vuePress/assets/js/112.389ed8be.js"><link rel="prefetch" href="/fish-vuePress/assets/js/113.ba5a739c.js"><link rel="prefetch" href="/fish-vuePress/assets/js/114.872d9d64.js"><link rel="prefetch" href="/fish-vuePress/assets/js/115.4309d043.js"><link rel="prefetch" href="/fish-vuePress/assets/js/116.87740fec.js"><link rel="prefetch" href="/fish-vuePress/assets/js/117.63f18122.js"><link rel="prefetch" href="/fish-vuePress/assets/js/118.44d760e2.js"><link rel="prefetch" href="/fish-vuePress/assets/js/119.3529884c.js"><link rel="prefetch" href="/fish-vuePress/assets/js/12.9c51930b.js"><link rel="prefetch" href="/fish-vuePress/assets/js/120.eedb9eb4.js"><link rel="prefetch" href="/fish-vuePress/assets/js/121.5907b619.js"><link rel="prefetch" href="/fish-vuePress/assets/js/122.57c46ac6.js"><link rel="prefetch" href="/fish-vuePress/assets/js/123.6a16c3ce.js"><link rel="prefetch" href="/fish-vuePress/assets/js/13.bfc937df.js"><link rel="prefetch" href="/fish-vuePress/assets/js/14.6e2f9564.js"><link rel="prefetch" href="/fish-vuePress/assets/js/15.492684f9.js"><link rel="prefetch" href="/fish-vuePress/assets/js/16.9ac703ed.js"><link rel="prefetch" href="/fish-vuePress/assets/js/17.78f1fa3f.js"><link rel="prefetch" href="/fish-vuePress/assets/js/18.50302f03.js"><link rel="prefetch" href="/fish-vuePress/assets/js/19.b3b1d403.js"><link rel="prefetch" href="/fish-vuePress/assets/js/20.ab36ee73.js"><link rel="prefetch" href="/fish-vuePress/assets/js/21.d134875b.js"><link rel="prefetch" href="/fish-vuePress/assets/js/22.ccbd72ee.js"><link rel="prefetch" href="/fish-vuePress/assets/js/23.2cc1aa00.js"><link rel="prefetch" href="/fish-vuePress/assets/js/24.92e65dfe.js"><link rel="prefetch" href="/fish-vuePress/assets/js/25.cc80f330.js"><link rel="prefetch" href="/fish-vuePress/assets/js/26.aa968d33.js"><link rel="prefetch" href="/fish-vuePress/assets/js/27.ba41f888.js"><link rel="prefetch" href="/fish-vuePress/assets/js/28.c3ff91c9.js"><link rel="prefetch" href="/fish-vuePress/assets/js/29.3514b31c.js"><link rel="prefetch" href="/fish-vuePress/assets/js/3.32bc8fa8.js"><link rel="prefetch" href="/fish-vuePress/assets/js/30.0f2a049c.js"><link rel="prefetch" href="/fish-vuePress/assets/js/31.01440300.js"><link rel="prefetch" href="/fish-vuePress/assets/js/32.40c194dc.js"><link rel="prefetch" href="/fish-vuePress/assets/js/33.81b8eb3d.js"><link rel="prefetch" href="/fish-vuePress/assets/js/34.6d0f9e44.js"><link rel="prefetch" href="/fish-vuePress/assets/js/35.9f1ac245.js"><link rel="prefetch" href="/fish-vuePress/assets/js/36.a87a485a.js"><link rel="prefetch" href="/fish-vuePress/assets/js/37.7702f58f.js"><link rel="prefetch" href="/fish-vuePress/assets/js/38.32d2d1d2.js"><link rel="prefetch" href="/fish-vuePress/assets/js/39.b2ff5038.js"><link rel="prefetch" href="/fish-vuePress/assets/js/4.4779ea48.js"><link rel="prefetch" href="/fish-vuePress/assets/js/40.6fa312a5.js"><link rel="prefetch" href="/fish-vuePress/assets/js/41.4761ebf4.js"><link rel="prefetch" href="/fish-vuePress/assets/js/42.29fbfdc0.js"><link rel="prefetch" href="/fish-vuePress/assets/js/43.aa23a39e.js"><link rel="prefetch" href="/fish-vuePress/assets/js/44.be35f9bd.js"><link rel="prefetch" href="/fish-vuePress/assets/js/45.80a6101c.js"><link rel="prefetch" href="/fish-vuePress/assets/js/46.600b4e84.js"><link rel="prefetch" href="/fish-vuePress/assets/js/47.304d0ef0.js"><link rel="prefetch" href="/fish-vuePress/assets/js/48.8764c1dc.js"><link rel="prefetch" href="/fish-vuePress/assets/js/49.77353cdf.js"><link rel="prefetch" href="/fish-vuePress/assets/js/5.cbb46f00.js"><link rel="prefetch" href="/fish-vuePress/assets/js/50.16716db0.js"><link rel="prefetch" href="/fish-vuePress/assets/js/51.280c0a49.js"><link rel="prefetch" href="/fish-vuePress/assets/js/52.226a4c8a.js"><link rel="prefetch" href="/fish-vuePress/assets/js/53.9a973fe9.js"><link rel="prefetch" href="/fish-vuePress/assets/js/54.5e274a07.js"><link rel="prefetch" href="/fish-vuePress/assets/js/55.9a47ab92.js"><link rel="prefetch" href="/fish-vuePress/assets/js/56.cc5b0e8c.js"><link rel="prefetch" href="/fish-vuePress/assets/js/57.c7f13fe7.js"><link rel="prefetch" href="/fish-vuePress/assets/js/58.31bbbb48.js"><link rel="prefetch" href="/fish-vuePress/assets/js/59.4e3a5f42.js"><link rel="prefetch" href="/fish-vuePress/assets/js/6.4cc288ba.js"><link rel="prefetch" href="/fish-vuePress/assets/js/60.20eed939.js"><link rel="prefetch" href="/fish-vuePress/assets/js/61.0322bda1.js"><link rel="prefetch" href="/fish-vuePress/assets/js/63.f44f5c7b.js"><link rel="prefetch" href="/fish-vuePress/assets/js/64.1b7013d9.js"><link rel="prefetch" href="/fish-vuePress/assets/js/65.615683e6.js"><link rel="prefetch" href="/fish-vuePress/assets/js/66.c856f15f.js"><link rel="prefetch" href="/fish-vuePress/assets/js/67.6805fa26.js"><link rel="prefetch" href="/fish-vuePress/assets/js/68.61892d42.js"><link rel="prefetch" href="/fish-vuePress/assets/js/69.8a96d76b.js"><link rel="prefetch" href="/fish-vuePress/assets/js/7.7fe813cf.js"><link rel="prefetch" href="/fish-vuePress/assets/js/70.7242dd78.js"><link rel="prefetch" href="/fish-vuePress/assets/js/71.fed4f163.js"><link rel="prefetch" href="/fish-vuePress/assets/js/72.58473ea1.js"><link rel="prefetch" href="/fish-vuePress/assets/js/73.5c644c69.js"><link rel="prefetch" href="/fish-vuePress/assets/js/74.6e4adbb2.js"><link rel="prefetch" href="/fish-vuePress/assets/js/75.0692b19c.js"><link rel="prefetch" href="/fish-vuePress/assets/js/76.8e2356ec.js"><link rel="prefetch" href="/fish-vuePress/assets/js/77.f5a04720.js"><link rel="prefetch" href="/fish-vuePress/assets/js/78.5badd67f.js"><link rel="prefetch" href="/fish-vuePress/assets/js/79.2ad462d4.js"><link rel="prefetch" href="/fish-vuePress/assets/js/8.306b4236.js"><link rel="prefetch" href="/fish-vuePress/assets/js/80.cf674bc9.js"><link rel="prefetch" href="/fish-vuePress/assets/js/81.e1a8e2a7.js"><link rel="prefetch" href="/fish-vuePress/assets/js/82.fe437e21.js"><link rel="prefetch" href="/fish-vuePress/assets/js/83.cda1683e.js"><link rel="prefetch" href="/fish-vuePress/assets/js/84.4476c068.js"><link rel="prefetch" href="/fish-vuePress/assets/js/85.3c26dd63.js"><link rel="prefetch" href="/fish-vuePress/assets/js/86.e7d49c5c.js"><link rel="prefetch" href="/fish-vuePress/assets/js/87.8932ebbe.js"><link rel="prefetch" href="/fish-vuePress/assets/js/88.d781c005.js"><link rel="prefetch" href="/fish-vuePress/assets/js/89.00cb84c8.js"><link rel="prefetch" href="/fish-vuePress/assets/js/9.438f5cd3.js"><link rel="prefetch" href="/fish-vuePress/assets/js/90.781d9766.js"><link rel="prefetch" href="/fish-vuePress/assets/js/91.45d7268d.js"><link rel="prefetch" href="/fish-vuePress/assets/js/92.b350dca6.js"><link rel="prefetch" href="/fish-vuePress/assets/js/93.362ee5f7.js"><link rel="prefetch" href="/fish-vuePress/assets/js/94.88302fed.js"><link rel="prefetch" href="/fish-vuePress/assets/js/95.25a4328c.js"><link rel="prefetch" href="/fish-vuePress/assets/js/96.30626ba1.js"><link rel="prefetch" href="/fish-vuePress/assets/js/97.fe7e8d43.js"><link rel="prefetch" href="/fish-vuePress/assets/js/98.b0f036a7.js"><link rel="prefetch" href="/fish-vuePress/assets/js/99.1f91fa20.js">
    <link rel="stylesheet" href="/fish-vuePress/assets/css/0.styles.ea34a56d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/fish-vuePress/" class="home-link router-link-active"><!----> <span class="site-name">小鱼儿的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/fish-vuePress/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="小鱼儿" class="dropdown-title"><span class="title">小鱼儿</span> <span class="arrow down"></span></button> <button type="button" aria-label="小鱼儿" class="mobile-dropdown-title"><span class="title">小鱼儿</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fish-vuePress/node-quick/" class="nav-link">
  快速掌握node
</a></li><li class="dropdown-item"><!----> <a href="/fish-vuePress/vue-quick/" class="nav-link">
  快速掌握vue
</a></li><li class="dropdown-item"><!----> <a href="/fish-vuePress/js/" class="nav-link">
  前端基础
</a></li></ul></div></div><div class="nav-item"><a href="/fish-vuePress/node/" class="nav-link">
  node
</a></div><div class="nav-item"><a href="/fish-vuePress/webframe/" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/fish-vuePress/vue-quick/" class="nav-link">
  快速掌握vue
</a></div><div class="nav-item"><a href="/fish-vuePress/database/" class="nav-link">
  数据库
</a></div><div class="nav-item"><a href="/fish-vuePress/android/" class="nav-link">
  android
</a></div><div class="nav-item"><a href="/fish-vuePress/interview/" class="nav-link">
  面试问题
</a></div><div class="nav-item"><a href="/fish-vuePress/react/" class="nav-link">
  其他
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/fish-vuePress/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="小鱼儿" class="dropdown-title"><span class="title">小鱼儿</span> <span class="arrow down"></span></button> <button type="button" aria-label="小鱼儿" class="mobile-dropdown-title"><span class="title">小鱼儿</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fish-vuePress/node-quick/" class="nav-link">
  快速掌握node
</a></li><li class="dropdown-item"><!----> <a href="/fish-vuePress/vue-quick/" class="nav-link">
  快速掌握vue
</a></li><li class="dropdown-item"><!----> <a href="/fish-vuePress/js/" class="nav-link">
  前端基础
</a></li></ul></div></div><div class="nav-item"><a href="/fish-vuePress/node/" class="nav-link">
  node
</a></div><div class="nav-item"><a href="/fish-vuePress/webframe/" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/fish-vuePress/vue-quick/" class="nav-link">
  快速掌握vue
</a></div><div class="nav-item"><a href="/fish-vuePress/database/" class="nav-link">
  数据库
</a></div><div class="nav-item"><a href="/fish-vuePress/android/" class="nav-link">
  android
</a></div><div class="nav-item"><a href="/fish-vuePress/interview/" class="nav-link">
  面试问题
</a></div><div class="nav-item"><a href="/fish-vuePress/react/" class="nav-link">
  其他
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/fish-vuePress/node-zy/" aria-current="page" class="sidebar-link">node目录</a></li><li><a href="/fish-vuePress/node-zy/path.html" aria-current="page" class="active sidebar-link">作为前端也需要知道的路径知识</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fish-vuePress/node-zy/path.html#path" class="sidebar-link">path</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fish-vuePress/node-zy/path.html#path-normalize" class="sidebar-link">path.normalize</a></li><li class="sidebar-sub-header"><a href="/fish-vuePress/node-zy/path.html#path-join" class="sidebar-link">path.join</a></li><li class="sidebar-sub-header"><a href="/fish-vuePress/node-zy/path.html#path-parse" class="sidebar-link">path.parse</a></li><li class="sidebar-sub-header"><a href="/fish-vuePress/node-zy/path.html#path-basename" class="sidebar-link">path.basename</a></li><li class="sidebar-sub-header"><a href="/fish-vuePress/node-zy/path.html#path-dirname" class="sidebar-link">path.dirname</a></li><li class="sidebar-sub-header"><a href="/fish-vuePress/node-zy/path.html#path-extname" class="sidebar-link">path.extname</a></li><li class="sidebar-sub-header"><a href="/fish-vuePress/node-zy/path.html#path-resolve" class="sidebar-link">path.resolve</a></li><li class="sidebar-sub-header"><a href="/fish-vuePress/node-zy/path.html#path-relative" class="sidebar-link">path.relative</a></li></ul></li><li class="sidebar-sub-header"><a href="/fish-vuePress/node-zy/path.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/fish-vuePress/node-zy/stream.html" class="sidebar-link">node核心模块-stream</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p><strong>前言</strong></p> <p>之前在做<code>webpack</code>配置时候多次用到路径相关内容，最近在写项目的时候，有一个文件需要上传到阿里云oss的功能，同时本地服务器也需要保留一个文件备份。多次用到了文件路径相关内容以及Node核心API的<code>path</code>模块，所以系统的学习了一下，整理了这篇文章。</p> <h1 id="node中的路径分类"><a href="#node中的路径分类" class="header-anchor">#</a> node中的路径分类</h1> <p>node中的路径大致分5类，<code>dirname</code>,<code>filename</code>,<code>process.cwd()</code>,<code>./</code>,<code>../</code>,其中<code>dirname</code>,<code>filename</code>,<code>process.cwd()</code>绝对路径</p> <p>通过代码对每个分类进行说明：</p> <p>文件目录结构如下：</p> <div class="language- extra-class"><pre class="language-text"><code>代码pra/
  - node核心API/
      - fs.js
      - path.js
</code></pre></div><p>path.js中的代码</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>__filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'./'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在代码pra目录下运行命令 <code>node node核心API/path.js</code>，我们可以看到结果如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">/</span>koala<span class="token operator">/</span>Desktop<span class="token operator">/</span>程序员成长指北<span class="token operator">/</span>代码pra<span class="token operator">/</span>node核心<span class="token constant">API</span>
<span class="token operator">/</span>koala<span class="token operator">/</span>Desktop<span class="token operator">/</span>程序员成长指北<span class="token operator">/</span>代码pra<span class="token operator">/</span>node核心<span class="token constant">API</span><span class="token operator">/</span>path<span class="token punctuation">.</span>js
<span class="token operator">/</span>koala<span class="token operator">/</span>Desktop<span class="token operator">/</span>程序员成长指北<span class="token operator">/</span>代码pra
<span class="token operator">/</span>koala<span class="token operator">/</span>Desktop<span class="token operator">/</span>程序员成长指北<span class="token operator">/</span>代码pra
</code></pre></div><p>然后我们有可以在<code>node核心API目录下</code>运行这个文件，<code>node path.js</code>,运行结果如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">/</span>koala<span class="token operator">/</span>Desktop<span class="token operator">/</span>程序员成长指北<span class="token operator">/</span>代码pra<span class="token operator">/</span>node核心<span class="token constant">API</span>
<span class="token operator">/</span>koala<span class="token operator">/</span>Desktop<span class="token operator">/</span>程序员成长指北<span class="token operator">/</span>代码pra<span class="token operator">/</span>node核心<span class="token constant">API</span><span class="token operator">/</span>path<span class="token punctuation">.</span>js
<span class="token operator">/</span>koala<span class="token operator">/</span>Desktop<span class="token operator">/</span>程序员成长指北<span class="token operator">/</span>代码pra<span class="token operator">/</span>node核心<span class="token constant">API</span>
<span class="token operator">/</span>koala<span class="token operator">/</span>Desktop<span class="token operator">/</span>程序员成长指北<span class="token operator">/</span>代码pra<span class="token operator">/</span>node核心<span class="token constant">API</span>
</code></pre></div><p>对比输出结果，暂时得到的结论是</p> <ul><li>__dirname: 总是返回被执行的 js 所在文件夹的绝对路径</li> <li>__filename: 总是返回被执行的 js 的绝对路径</li> <li>process.cwd(): 总是返回运行 node 命令时所在的文件夹的绝对路径</li> <li>./: 跟 process.cwd() 一样，返回 node 命令时所在的文件夹的绝对路径</li></ul> <p>为什么说上面是暂时得到的结论，因为是有错误的，再看一段代码：
我们在path.js中加上这句代码</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>exports<span class="token punctuation">.</span><span class="token constant">A</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div><p>之前直接通过readFile读取文件路径报错，</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./path.js'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>现在在刚才报错的fs.js里面加这两句代码看看：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> test <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./path.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span>
</code></pre></div><p>在<code>代码pra/</code>目录下运行<code>node node核心API/fs.js</code>，最后查看结果，说明是可以访问到的：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span> <span class="token constant">A</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
</code></pre></div><p>那么关于 <code>./</code>正确的结论是：</p> <p>在 <code>require()</code>中使用是跟<code>__dirname</code> 的效果相同，不会因为启动脚本的目录不一样而改变，在其他情况下跟 <code>process.cwd()</code> 效果相同，是相对于启动脚本所在目录的路径。</p> <h4 id="路径知识总结"><a href="#路径知识总结" class="header-anchor">#</a> 路径知识总结：</h4> <ul><li><code>__dirname</code>： 获得当前执行文件所在目录的完整目录名</li> <li><code>__filename</code>： 获得当前执行文件的带有完整绝对路径的文件名</li> <li><code>process.cwd()</code>：获得当前执行node命令时候的文件夹目录名</li> <li><code>./</code>： 不使用require时候，<code>./</code>与<code>process.cwd()</code>一样，使用<code>require</code>时候，与<code>__dirname</code>一样</li></ul> <p>只有在 require() 时才使用相对路径(./, ../) 的写法，其他地方一律使用绝对路径，如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 当前目录下</span>
 path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span>__filename<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'/path.js'</span><span class="token punctuation">;</span> 
<span class="token comment">// 相邻目录下</span>
 path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../regx/regx.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="path"><a href="#path" class="header-anchor">#</a> path</h2> <p>前面讲解了路径的相关比较，接下来单独聊聊path这个模块，这个模块在很多地方比较常用，所以，对于我们来说，掌握他，对我们以后的发展更有利，不用每次看webpack的配置文件还要去查询一下这个api是干什么用的，很影响我们的效率</p> <blockquote><p>这是api官网地址:https://nodejs.org/api/path.html</p></blockquote> <p>个人认为官网中的api没有必要都掌握，下面会对一些常用的api进行讲解，我经常用到的，或者作为一个前端开发工程师在webpack等工程配置的时候经常用到的。</p> <h3 id="path-normalize"><a href="#path-normalize" class="header-anchor">#</a> path.normalize</h3> <p><strong>举例说明</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">normalize</span><span class="token punctuation">(</span><span class="token string">'/koala/Desktop//程序员成长指北//代码pra/..'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>规范后的结果</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">/</span>koala<span class="token operator">/</span>Desktop<span class="token operator">/</span>程序员成长指北<span class="token operator">/</span>代码pra
</code></pre></div><p><strong>作用总结</strong></p> <p>规范化路径，把不规范的路径规范化。</p> <h3 id="path-join"><a href="#path-join" class="header-anchor">#</a> path.join</h3> <p><strong>举例说明</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">,</span> <span class="token string">'task.js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>转化后的结果</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>src<span class="token operator">/</span>task<span class="token punctuation">.</span>js
<span class="token punctuation">.</span>
</code></pre></div><p><strong>作用总结</strong></p> <blockquote><p>path.join([...paths])</p></blockquote> <ol><li>传入的参数是字符串的路径片段，可以是一个，也可以是多个</li> <li>返回的是一个拼接好的路径，但是根据平台的不同，他会对路径进行不同的规范化，举个例子，<code>Unix</code>系统是<code>/</code>，<code>Windows</code>系统是<code>\</code>，那么你在两个系统下看到的返回结果就不一样。</li> <li>如果返回的路径字符串长度为零，那么他会返回一个<code>.</code>，代表当前的文件夹。</li> <li>如果传入的参数中有不是字符串的，那就直接会报错</li></ol> <h3 id="path-parse"><a href="#path-parse" class="header-anchor">#</a> path.parse</h3> <p><strong>举例说明</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'/koala/Desktop/程序员成长指北/代码pra/node核心API'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>运行结果</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span> root<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
  dir<span class="token operator">:</span> <span class="token string">'/koala/Desktop/程序员成长指北/代码pra'</span><span class="token punctuation">,</span>
  base<span class="token operator">:</span> <span class="token string">'node核心API'</span><span class="token punctuation">,</span>
  ext<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
  name<span class="token operator">:</span> <span class="token string">'node核心API'</span> 
<span class="token punctuation">}</span>
</code></pre></div><p><strong>作用总结</strong></p> <p>他返回的是一个对象，那么我们来把这么几个名词熟悉一下：</p> <ol><li>root：代表根目录</li> <li>dir：代表文件所在的文件夹</li> <li>base：代表整一个文件</li> <li>name：代表文件名</li> <li>ext: 代表文件的后缀名</li></ol> <h3 id="path-basename"><a href="#path-basename" class="header-anchor">#</a> path.basename</h3> <p><strong>举例说明</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span><span class="token string">'/koala/Desktop/程序员成长指北/代码pra/node核心API'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span><span class="token string">'/koala/Desktop/程序员成长指北/代码pra/node核心API/path.js'</span><span class="token punctuation">,</span> <span class="token string">'.js'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>运行结果</strong></p> <p>看了上面代码的例子，我想应该知道了basename结果，嘿嘿。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>node核心<span class="token constant">API</span>
path
</code></pre></div><p><strong>作用总结</strong></p> <p>basename接收两个参数，第一个是<code>path</code>，第二个是<code>ext</code>(可选参数)，当输入第二个参数的时候，打印结果不出现后缀名</p> <h3 id="path-dirname"><a href="#path-dirname" class="header-anchor">#</a> path.dirname</h3> <p><strong>举例说明</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span><span class="token string">'/koala/Desktop/程序员成长指北/代码pra/node核心API'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>运行结果</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">/</span>koala<span class="token operator">/</span>Desktop<span class="token operator">/</span>程序员成长指北<span class="token operator">/</span>代码pra
</code></pre></div><p><strong>作用总结</strong></p> <p>返回文件的目录完整地址</p> <h3 id="path-extname"><a href="#path-extname" class="header-anchor">#</a> path.extname</h3> <p><strong>举例说明</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">'index.html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">'index.coffee.md'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">'index.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">'.index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>运行结果</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">.</span>html
<span class="token punctuation">.</span>md
<span class="token punctuation">.</span>
<span class="token string">''</span>
<span class="token string">''</span>
</code></pre></div><p><strong>作用总结</strong></p> <p>返回的是后缀名，但是最后两种情况返回'',大家注意一下。</p> <h3 id="path-resolve"><a href="#path-resolve" class="header-anchor">#</a> path.resolve</h3> <p><strong>举例说明</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'/foo/bar'</span><span class="token punctuation">,</span> <span class="token string">'/bar/faa'</span><span class="token punctuation">,</span> <span class="token string">'..'</span><span class="token punctuation">,</span> <span class="token string">'a/../c'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>输出结果</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">/</span>bar<span class="token operator">/</span>c
</code></pre></div><p><strong>作用总结</strong></p> <blockquote><p>path.resolve([...paths])</p></blockquote> <p>path.resolve就相当于是shell下面的<code>cd</code>操作，从左到右运行一遍<code>cd path</code>命令，最终获取的绝对路径/文件名，这个接口所返回的结果了。但是<code>resolve</code>操作和<code>cd</code>操作还是有区别的，<code>resolve</code>的路径可以没有，而且最后进入的可以是文件。具体<code>cd</code>步骤如下</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>cd <span class="token operator">/</span>foo<span class="token operator">/</span>bar<span class="token operator">/</span>    <span class="token comment">//这是第一步, 现在的位置是/foo/bar/</span>
cd <span class="token operator">/</span>bar<span class="token operator">/</span>faa     <span class="token comment">//这是第二步，这里和第一步有区别，他是从/进入的，也就时候根目录，现在的位置是/bar/faa</span>
cd <span class="token punctuation">.</span><span class="token punctuation">.</span>       <span class="token comment">//第三步，从faa退出来，现在的位置是 /bar</span>
cd a<span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>c   <span class="token comment">//第四步，进入a，然后在推出，在进入c，最后位置是/bar/c</span>
</code></pre></div><h3 id="path-relative"><a href="#path-relative" class="header-anchor">#</a> path.relative</h3> <p><strong>举例说明</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">relative</span><span class="token punctuation">(</span><span class="token string">'/data/orandea/test/aaa'</span><span class="token punctuation">,</span> <span class="token string">'/data/orandea/impl/bbb'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">relative</span><span class="token punctuation">(</span><span class="token string">'/data/demo'</span><span class="token punctuation">,</span> <span class="token string">'/data/demo'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">relative</span><span class="token punctuation">(</span><span class="token string">'/data/demo'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>运行结果</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>impl<span class="token operator">/</span>bbb
 <span class="token string">&quot;&quot;</span>
 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>koala<span class="token operator">/</span>Desktop<span class="token operator">/</span>程序员成长指北<span class="token operator">/</span>代码pra<span class="token operator">/</span>node核心<span class="token constant">API</span>
</code></pre></div><p><strong>作用总结</strong></p> <p>path.relative(from, to)</p> <p>描述：从from路径，到to路径的相对路径。</p> <p>边界：</p> <ul><li>如果from、to指向同个路径，那么，返回空字符串。</li> <li>如果from、to中任一者为空，那么，返回当前工作路径。</li></ul> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>本篇文章关于路径的知识就说到这里，基础很重要的，既能节约开发时间，又能减少报错。</p> <p>今天就分享这么多，如果对分享的内容感兴趣，可以关注公众号「程序员成长指北」，或者加入技术交流群，大家一起讨论。</p> <p>进阶技术路线</p> <p><img src="http://img.xiaogangzai.cn/way.jpg" alt="">
加入我们一起学习吧！
<img src="http://img.xiaogangzai.cn/code.jpg" alt=""></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/fish-vuePress/node-zy/" class="prev router-link-active">
        node目录
      </a></span> <span class="next"><a href="/fish-vuePress/node-zy/stream.html">
        node核心模块-stream
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/fish-vuePress/assets/js/app.e911428d.js" defer></script><script src="/fish-vuePress/assets/js/2.9e5a7c68.js" defer></script><script src="/fish-vuePress/assets/js/62.f5922297.js" defer></script>
  </body>
</html>
